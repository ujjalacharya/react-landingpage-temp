1
00:00:00,840 --> 00:00:03,960
OK so let's try to submit the form.

2
00:00:04,000 --> 00:00:04,310
OK.

3
00:00:04,350 --> 00:00:13,770
So I'm going to go to sign in and I'm going to copy this submit form function because most of this is

4
00:00:13,770 --> 00:00:15,160
going to be the same.

5
00:00:15,340 --> 00:00:24,480
So we love just on top of the render going to delay this other put it and to lead this for now.

6
00:00:24,930 --> 00:00:26,510
And this one is going to be the same.

7
00:00:26,550 --> 00:00:27,140
OK.

8
00:00:27,510 --> 00:00:34,770
So what is going to happen to the forum something that before we prevent default we create a data submit

9
00:00:34,800 --> 00:00:36,300
check if the form is valid.

10
00:00:36,300 --> 00:00:40,210
And you know so on we can add that there's a couple of times already.

11
00:00:40,230 --> 00:00:41,920
Now there is one more thing.

12
00:00:41,970 --> 00:00:47,670
First I'm going to do a console log just like this and and.

13
00:00:47,700 --> 00:00:50,180
What do we get on the data to submit.

14
00:00:50,190 --> 00:00:51,890
All right.

15
00:00:54,310 --> 00:01:00,000
So if by of course we get the information any file edit match you're going to get the data to submit.

16
00:01:00,010 --> 00:01:01,600
It means that everything is OK.

17
00:01:01,600 --> 00:01:06,170
We are not going to the error state which means that the form is not valid.

18
00:01:06,220 --> 00:01:12,060
We get a valid entry you know Avali a key value pair and everything is good.

19
00:01:12,090 --> 00:01:15,430
No everything is valid but we have one tiny problem.

20
00:01:15,430 --> 00:01:24,130
If I go to the to the AM original database there is we have two different keys to two different properties

21
00:01:24,520 --> 00:01:28,030
that we don't get right here by default.

22
00:01:28,030 --> 00:01:32,870
So we have the local thumbnail and we have the A Whale away.

23
00:01:32,950 --> 00:01:36,370
Thumbnail this once if we take a look at this.

24
00:01:36,430 --> 00:01:44,350
We don't have the thumbnails and the thing is that whenever we select a team the thumbnails come from

25
00:01:44,350 --> 00:01:46,680
the database from the database of teams.

26
00:01:46,840 --> 00:01:52,690
So each teen team have a name a name a short name and a thumbnail.

27
00:01:52,690 --> 00:01:55,250
So by default we don't add them here.

28
00:01:55,390 --> 00:02:01,050
So we will need to do this right here before we submit the form.

29
00:02:01,060 --> 00:02:07,400
Now where can we get the name of the thumbnail from the teams.

30
00:02:07,510 --> 00:02:10,610
And remember we stored the teams right here at the top.

31
00:02:10,780 --> 00:02:12,370
So this is what we're going to be doing.

32
00:02:12,520 --> 00:02:17,720
We're going to try to grab the name of the team we are entering right here.

33
00:02:17,890 --> 00:02:23,950
We're going to look to that database you know that state actually that array begin to match the name

34
00:02:24,040 --> 00:02:26,680
and we're going to get the thumbnail from there.

35
00:02:27,020 --> 00:02:32,950
And it's real simple we just need to run a for loop or submit form.

36
00:02:33,130 --> 00:02:33,840
How can we do it.

37
00:02:33,850 --> 00:02:43,170
First we need to enter the teams so this that state that teams Dodd and I are going to run for each

38
00:02:43,180 --> 00:02:51,400
just like this for each opening close to each iteration we will get the team right open and close.

39
00:02:51,400 --> 00:02:58,430
Now if the iteration and this team matches the team we have right here on the form for local and a way

40
00:02:58,610 --> 00:03:00,710
we're going to get the top the thumbnail.

41
00:03:00,910 --> 00:03:04,010
So I'm going to write just in a logical operation.

42
00:03:04,030 --> 00:03:13,630
If so if the team right here this team the one on each iteration and then the short name it calls to

43
00:03:13,630 --> 00:03:21,130
whatever we have on the data to submit that local remember that we are accessing local.

44
00:03:21,130 --> 00:03:27,520
Then of course we're going to graph the data to see if med we're going to create a new imperf. which

45
00:03:27,520 --> 00:03:29,590
is going to be local thumbnail.

46
00:03:29,650 --> 00:03:33,790
You have it right here on the database local th and B.

47
00:03:33,820 --> 00:03:35,390
Whoops sorry for that.

48
00:03:35,490 --> 00:03:36,400
Go back.

49
00:03:36,880 --> 00:03:40,610
So let me create it right here at the batch.

50
00:03:40,630 --> 00:03:48,160
It's local t h m b and it's going to be equal to whatever we have on the team.

51
00:03:48,160 --> 00:03:49,410
On each iteration.

52
00:03:49,620 --> 00:03:54,180
For c th and B H and B.

53
00:03:54,190 --> 00:03:55,740
All right.

54
00:03:55,780 --> 00:03:57,950
And the same thing with the way.

55
00:03:57,970 --> 00:04:04,000
So I'm going to copy this and paste it at the bottom and in this case a local is going to be a way on

56
00:04:04,000 --> 00:04:04,920
the thumbnail.

57
00:04:04,930 --> 00:04:06,600
Everything is going to be the same right here.

58
00:04:06,730 --> 00:04:11,580
And the data just med is going to be a way thumbnail.

59
00:04:11,620 --> 00:04:12,370
All right.

60
00:04:12,370 --> 00:04:18,650
So now on each loop we an access we're going to enter to the submit and push this information we can

61
00:04:18,670 --> 00:04:21,160
add this keys and you know this properties.

62
00:04:21,460 --> 00:04:30,390
So now let me just reload the application if I go to Edit match and edit the match and inspect this

63
00:04:30,690 --> 00:04:35,950
we get an a way thumbnail of Huddersfield because this is the name of thumbnail for this team.

64
00:04:35,970 --> 00:04:38,800
This is the real name of team you know a little bit long.

65
00:04:38,910 --> 00:04:43,960
That's why we have a short name and we have a local thumbnail for the local team.

66
00:04:43,980 --> 00:04:45,690
You know they are different.

67
00:04:45,690 --> 00:04:52,050
That's why we cannot use the original name because it might be different from the local thumbnail thumbnail

68
00:04:52,050 --> 00:04:55,330
we have on the on the public directory.

69
00:04:55,330 --> 00:04:59,250
So OK so now we have pretty much the whole data we need.

70
00:04:59,340 --> 00:05:00,040
Right.

71
00:05:00,150 --> 00:05:06,800
So now what we can do right here instead of doing a console log we can first check if you want to add

72
00:05:06,810 --> 00:05:09,510
it to match or add a new match.

73
00:05:09,510 --> 00:05:12,410
And I'm going to do if opening close.

74
00:05:12,480 --> 00:05:20,060
So if this that state that form type is equal then edit match.

75
00:05:20,070 --> 00:05:23,660
Remember we added this at the top added match.

76
00:05:23,760 --> 00:05:31,490
Then we can enter the edit firebase logic and else we're going to add a match.

77
00:05:31,620 --> 00:05:33,510
But we're going to do that later.

78
00:05:33,510 --> 00:05:34,490
All right.

79
00:05:35,430 --> 00:05:39,390
So I'm going to go right here and we're going to start doing the you know the pushing.

80
00:05:39,420 --> 00:05:51,930
So firebase D.B DA that ref and we can enter matchups for Slash and the ID that we get on on inside

81
00:05:51,930 --> 00:05:52,400
the state.

82
00:05:52,410 --> 00:05:55,780
So this that state that match ID.

83
00:05:55,920 --> 00:06:01,170
That's why whenever we populate all this information right here the update feels we are storing the

84
00:06:01,170 --> 00:06:02,450
match ID right there.

85
00:06:02,610 --> 00:06:03,370
All right.

86
00:06:03,390 --> 00:06:04,800
Everything's cool.

87
00:06:04,980 --> 00:06:11,100
So we are accessing the majority of course then we're going to get something and what we need to do

88
00:06:11,110 --> 00:06:15,460
after ref is to use the update method.

89
00:06:15,480 --> 00:06:17,680
They wouldn't give us update just like this.

90
00:06:17,700 --> 00:06:19,740
We cannot go to them already.

91
00:06:19,860 --> 00:06:27,480
We're going to be updating everything with whatever we get from data to submit an update data to submit

92
00:06:28,530 --> 00:06:31,380
and then we will get our promise back.

93
00:06:31,380 --> 00:06:31,950
All right.

94
00:06:32,250 --> 00:06:37,050
And then of course we will get a response whatever response it doesn't matter right now.

95
00:06:37,290 --> 00:06:39,520
And we will run something.

96
00:06:39,720 --> 00:06:40,510
All right.

97
00:06:40,560 --> 00:06:43,410
And of course if you get an error you can do the catch.

98
00:06:43,410 --> 00:06:46,230
It's completely up to you.

99
00:06:47,130 --> 00:06:53,370
And on the catch we get a no say form error success success for our troop just same thing are doing

100
00:06:53,370 --> 00:06:55,350
right here at bottom from error.

101
00:06:55,350 --> 00:06:56,170
It's equal to true.

102
00:06:56,190 --> 00:06:58,930
So we can say do something it's wrong.

103
00:06:58,980 --> 00:07:00,150
All right.

104
00:07:00,180 --> 00:07:08,160
Now if we are OK I want to run a success form function so I GOING TO THE I'm going to do this.

105
00:07:08,290 --> 00:07:10,890
That success.

106
00:07:11,490 --> 00:07:18,530
Sess and then form they're going to be passing a message dated.

107
00:07:18,750 --> 00:07:20,580
Correct.

108
00:07:21,290 --> 00:07:21,630
All right.

109
00:07:21,720 --> 00:07:22,590
Make sense.

110
00:07:22,890 --> 00:07:25,070
So we don't have the success form function.

111
00:07:25,140 --> 00:07:25,680
Going to add it.

112
00:07:25,680 --> 00:07:26,640
Real quick right now.

113
00:07:26,640 --> 00:07:30,420
It's a pretty pretty dumb function.

114
00:07:30,420 --> 00:07:33,170
You're not going to do a lot of things on this access forum.

115
00:07:33,180 --> 00:07:36,750
So the only thing we do here is just update state.

116
00:07:36,870 --> 00:07:37,460
Right.

117
00:07:37,560 --> 00:07:43,680
So this dot set state opening close and open again to save form.

118
00:07:43,700 --> 00:07:50,480
Success is equal to updated correctly which is actually the same thing we are passing right here.

119
00:07:50,580 --> 00:07:57,960
So I'm going to say message and form success is going to be equal to whatever we get from the message.

120
00:07:58,410 --> 00:08:03,010
Now the thing is that after we get this message you know that everything was updated.

121
00:08:03,180 --> 00:08:05,090
I want to clear that message.

122
00:08:05,220 --> 00:08:06,990
So I'm going to add a set time out.

123
00:08:06,990 --> 00:08:10,710
We kind of already did this in the past with a different component.

124
00:08:11,100 --> 00:08:16,680
And I'm going to say this that state same thing we are doing here from success.

125
00:08:16,780 --> 00:08:21,820
We set it back to nothing and I'm going to do it after two seconds.

126
00:08:22,230 --> 00:08:22,840
All right.

127
00:08:23,530 --> 00:08:25,340
So all of this looks nice.

128
00:08:25,340 --> 00:08:28,180
This is pretty dumb but everything looks nice.

129
00:08:28,190 --> 00:08:28,950
OK.

130
00:08:29,360 --> 00:08:34,340
So I'm going to reload the application and I'm going to be changing.

131
00:08:34,370 --> 00:08:35,870
I don't know maybe

132
00:08:38,620 --> 00:08:48,520
the this one whatever Matthias blue I don't know an arena arena so we can actually see the change team

133
00:08:48,560 --> 00:08:50,870
result was not played.

134
00:08:50,870 --> 00:08:53,290
I'm going to say yes whatever doesn't matter.

135
00:08:53,390 --> 00:08:58,050
They won and they're going to change that date to something else.

136
00:08:59,010 --> 00:09:01,870
I don't know maybe yesterday doesn't matter.

137
00:09:01,890 --> 00:09:03,450
Maybe a couple days ago.

138
00:09:03,660 --> 00:09:05,660
Going to edit the match and let's see what happens.

139
00:09:05,820 --> 00:09:07,200
We get updated correctly.

140
00:09:07,230 --> 00:09:15,720
And if I go to the database the game was Manchester City and I gazed out of town or something like that.

141
00:09:15,810 --> 00:09:20,150
So we get arena arena so that change was plied.

142
00:09:20,250 --> 00:09:23,460
We get a result of when we didn't change the way we sold the way.

143
00:09:23,550 --> 00:09:28,530
So everything is working we are updating everything correctly and the message goes away after a few

144
00:09:28,530 --> 00:09:29,380
seconds.

145
00:09:29,500 --> 00:09:32,170
So Goodman this works.

146
00:09:32,190 --> 00:09:35,820
So now what happens if I want to add a match.

147
00:09:35,880 --> 00:09:37,210
We're going to go right here.

148
00:09:37,230 --> 00:09:40,480
Clay can match and of course we get nothing.

149
00:09:40,530 --> 00:09:46,770
So we need to add a route for this that it's actually going to go to the same place in this but since

150
00:09:46,830 --> 00:09:51,090
we don't have an I.D. instead of EDID match you're going to get at match.

151
00:09:51,240 --> 00:09:53,460
And we are not going to pre-populated everything.

152
00:09:53,460 --> 00:09:59,330
It's already on the functions and at the end when we want to you know submit submit something.

153
00:09:59,490 --> 00:10:02,740
We're going to do something else right here because we are adding a match.

154
00:10:02,970 --> 00:10:11,310
And remember as well that we want to change this a little bit because we don't want to populate everything

155
00:10:11,310 --> 00:10:13,090
so we don't really have a match.

156
00:10:13,440 --> 00:10:15,900
So if you want you can do it by yourself.

157
00:10:15,960 --> 00:10:21,440
I'm going to put the code of everything on this section this resource so you can try to do it yourself.

158
00:10:21,450 --> 00:10:23,280
It's not that complicated.

159
00:10:23,370 --> 00:10:24,000
Right.

160
00:10:24,240 --> 00:10:28,420
So if you want to do it good if not on the next section are going to tell you how to do it.

161
00:10:28,440 --> 00:10:33,780
It's going to be really really small really short because we pretty much have everything we need.

162
00:10:33,780 --> 00:10:34,660
All right.

163
00:10:34,660 --> 00:10:36,430
So let's go to the next section.

