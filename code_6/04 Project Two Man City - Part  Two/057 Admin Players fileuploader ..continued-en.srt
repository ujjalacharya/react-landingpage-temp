1
00:00:00,880 --> 00:00:04,920
All right so let's grade this functions the handle upload start.

2
00:00:04,920 --> 00:00:07,280
This is the error and then the success.

3
00:00:07,330 --> 00:00:11,540
Going to go right here after the state and gets a handle upload start.

4
00:00:11,800 --> 00:00:13,240
Equals to a function.

5
00:00:13,240 --> 00:00:16,160
So what is going to happen whenever we start uploading.

6
00:00:16,270 --> 00:00:24,070
We're going to change the uploading to true so there is that set state opening close and is uploading

7
00:00:24,290 --> 00:00:25,150
to true.

8
00:00:25,150 --> 00:00:30,670
You can do much much more depends on you know what you're building right now which just changed it's

9
00:00:30,700 --> 00:00:31,600
uploading.

10
00:00:31,690 --> 00:00:34,260
Then we have the error the handle upload error.

11
00:00:34,270 --> 00:00:40,690
If we do have an error we want to do something now in this case I want to again keep it simple because

12
00:00:40,720 --> 00:00:42,970
we still need to do a lot of things.

13
00:00:43,060 --> 00:00:50,380
And this project kind of went too long already and we need to do a lot of things.

14
00:00:50,440 --> 00:00:56,320
So it went a little bit long because then the next one next project is going to be really really long

15
00:00:56,320 --> 00:00:58,160
and much more complicated in this.

16
00:00:58,180 --> 00:01:00,050
So I'm not going to add an error if.

17
00:01:00,100 --> 00:01:04,990
Of course in real life if you do get an error from the server you want to display an error message so

18
00:01:05,140 --> 00:01:06,690
you can do that right.

19
00:01:06,940 --> 00:01:10,440
So we're going to change that it's uploading just to false.

20
00:01:10,440 --> 00:01:10,770
All right.

21
00:01:10,790 --> 00:01:12,130
Just we are going to cancel that.

22
00:01:12,130 --> 00:01:13,720
It's uploading.

23
00:01:13,720 --> 00:01:14,300
All right.

24
00:01:14,530 --> 00:01:21,280
Then of course we want to show this loader the circular progress we're using at the top.

25
00:01:21,430 --> 00:01:22,850
So I'm going to go right here.

26
00:01:22,900 --> 00:01:25,870
I'm going to make some space and we need to add that logic.

27
00:01:25,930 --> 00:01:26,530
We're going to do.

28
00:01:26,590 --> 00:01:27,580
It's going to be pretty simple.

29
00:01:27,610 --> 00:01:28,860
So open it close.

30
00:01:29,050 --> 00:01:33,390
And if this state that is uploading it's equal to true.

31
00:01:33,430 --> 00:01:37,080
We want to do something if not we are not going to do anything.

32
00:01:37,240 --> 00:01:37,580
All right.

33
00:01:37,660 --> 00:01:38,410
Very good.

34
00:01:38,800 --> 00:01:40,240
So it's out of here of course.

35
00:01:40,270 --> 00:01:48,540
We just at a dip and I call that class name and then progress whatever.

36
00:01:48,970 --> 00:01:51,670
And I'm going to add some inline stylings.

37
00:01:51,700 --> 00:01:54,930
This is something I added after wards.

38
00:01:54,930 --> 00:02:04,730
So opening close text a line and going to do some text on line and they're going to do Center coma and

39
00:02:04,820 --> 00:02:05,530
center.

40
00:02:05,660 --> 00:02:06,720
Sorry coma.

41
00:02:06,980 --> 00:02:13,190
And again at a margin margin of 30 pixels in zero from the sides.

42
00:02:13,190 --> 00:02:13,920
All right.

43
00:02:14,030 --> 00:02:17,500
So inside of here we need to add the circular progress.

44
00:02:17,590 --> 00:02:22,190
And as you remember we can pass some props to see modified default behavior.

45
00:02:22,250 --> 00:02:30,620
So I want to change the color to something else and it's going to be 9 8 C 6 9.

46
00:02:30,620 --> 00:02:37,730
Now again we can change the thickness so I want to change thickness so thick and this equals two and

47
00:02:37,730 --> 00:02:39,070
I want to use the 7.

48
00:02:39,090 --> 00:02:41,030
It's going to be pretty thick.

49
00:02:41,090 --> 00:02:41,830
All right.

50
00:02:42,350 --> 00:02:48,060
So we go right here and beginner Sulmasy white firebase a storage.

51
00:02:48,080 --> 00:02:49,210
It's not a function.

52
00:02:49,250 --> 00:02:55,300
And so if we go to firebase at the top we are bringing up database.

53
00:02:55,370 --> 00:02:58,210
Oh but we don't have storage.

54
00:02:58,220 --> 00:03:00,590
So again we need to do pretty much the same thing.

55
00:03:00,640 --> 00:03:05,800
I'm going to copy the import firebase forward slash and then storage.

56
00:03:06,200 --> 00:03:07,880
Always forget to do this.

57
00:03:08,150 --> 00:03:10,900
But you know the error message pretty clear.

58
00:03:11,120 --> 00:03:16,520
So when we do the upload of course we're going to get the circular progress.

59
00:03:16,520 --> 00:03:19,560
I'm not going to test it because the upload is going to work.

60
00:03:19,690 --> 00:03:21,000
I'm pretty sure it's going to work.

61
00:03:21,020 --> 00:03:26,780
So we will be uploading something you know a dummy image and I want to do the handle upload success

62
00:03:26,780 --> 00:03:27,740
first.

63
00:03:27,740 --> 00:03:28,240
All right.

64
00:03:28,550 --> 00:03:30,390
So let's do the handle.

65
00:03:30,390 --> 00:03:31,360
Upload success.

66
00:03:31,360 --> 00:03:36,590
This is the one we care so I'm going to open and close.

67
00:03:36,590 --> 00:03:38,690
Just going to be a function.

68
00:03:38,690 --> 00:03:45,740
Now the upload success rate the job of this one is just going to it's going to let us know what is what

69
00:03:45,750 --> 00:03:48,730
happened after the image was.

70
00:03:48,890 --> 00:03:49,690
Upload it.

71
00:03:49,790 --> 00:03:54,290
And if you if you're thinking where are we uploading images.

72
00:03:54,380 --> 00:04:00,920
Well right here storage ref we are saying that we want to access storage and upload here so the file

73
00:04:00,920 --> 00:04:05,180
uploader will take this and it will do all the job for us.

74
00:04:05,180 --> 00:04:14,870
Resample OK so upload success whenever this is done this process this unravel of task success is going

75
00:04:14,870 --> 00:04:22,070
to go back to this this to handle Oblak says our function and it will be passing some arguments and

76
00:04:22,130 --> 00:04:25,700
arguments its actual file upload information.

77
00:04:25,700 --> 00:04:28,490
What happened after the file was uploaded.

78
00:04:28,670 --> 00:04:30,910
So we're going to say file name.

79
00:04:31,250 --> 00:04:38,120
So on firebase after everything gets uploaded it will return the information about that upload.

80
00:04:38,480 --> 00:04:42,620
And if you think about it we're going to need the name and the you are out because we need to store

81
00:04:42,620 --> 00:04:48,180
them inside of our eyes our comp component to show the actual image.

82
00:04:48,440 --> 00:04:50,140
And this is going to be a little bit weird.

83
00:04:50,210 --> 00:04:53,490
So first what I want to do I want to do this.

84
00:04:53,600 --> 00:05:01,340
That said state open close and I to say I want to bring the name and the name is going to be equal to

85
00:05:01,340 --> 00:05:09,710
file name that Acoma and I want to change it is uploading to false.

86
00:05:10,090 --> 00:05:13,390
And of course right now at the bottom we're going to do some more things.

87
00:05:13,480 --> 00:05:15,680
But first I want to see the file name.

88
00:05:15,700 --> 00:05:21,480
I went to cancel the filename so cancel law and then filing went to see why.

89
00:05:21,490 --> 00:05:24,030
But what we get.

90
00:05:24,100 --> 00:05:24,640
So OK.

91
00:05:24,670 --> 00:05:27,430
So let's do the uploading and see what happens.

92
00:05:27,430 --> 00:05:29,740
So of course I have a lot of things.

93
00:05:30,010 --> 00:05:38,630
So my course Riak practice and I believe it's AM city and I'm going to go and make this bigger.

94
00:05:39,070 --> 00:05:45,010
I'm going to go to source I leave and then resources and are going to go to the directory.

95
00:05:45,010 --> 00:05:52,680
So right here inside images inside resources you have all the images off the players right here.

96
00:05:52,690 --> 00:05:57,670
You have them images and players to upload defense keeper midfield and striker.

97
00:05:57,730 --> 00:06:04,150
So you pretty much have all the images right there players and right here player to upload are going

98
00:06:04,150 --> 00:06:05,260
to upload this one.

99
00:06:05,500 --> 00:06:06,700
Doesn't matter right now.

100
00:06:07,030 --> 00:06:11,580
So we got the progress and then at the end we get dis.

101
00:06:11,590 --> 00:06:12,290
So this is good.

102
00:06:12,310 --> 00:06:14,450
You know it works.

103
00:06:14,500 --> 00:06:20,990
Now if we think about this we can have a problem because we are.

104
00:06:21,190 --> 00:06:23,950
The firebase does.

105
00:06:24,100 --> 00:06:28,590
It's just going to give us back just the file name of the of the upload.

106
00:06:28,620 --> 00:06:33,960
You know the file name of image and this is just the name the name and then Tarpeian G.

107
00:06:34,060 --> 00:06:39,720
If we wanted to include this on a div maybe to get a Bactrim image how are we going to get it.

108
00:06:39,940 --> 00:06:46,570
Because the location of this image should be something like I don't know firebase HTP as firebase that

109
00:06:46,570 --> 00:06:53,980
come forward slash the idea of our you know our project right here inside firebase then forward slash

110
00:06:54,020 --> 00:06:56,940
storage forward slash images and then the name.

111
00:06:57,010 --> 00:07:00,610
So we didn't have a real l which is have the name.

112
00:07:00,610 --> 00:07:07,900
So we need a way to go to firebase and say Dude I want to fetch the actual Eurail the public your l

113
00:07:08,110 --> 00:07:09,180
of this image.

114
00:07:09,280 --> 00:07:10,900
And by default we don't get it.

115
00:07:10,900 --> 00:07:12,460
We need to do something else.

116
00:07:12,760 --> 00:07:13,990
So what do we do.

117
00:07:13,990 --> 00:07:17,740
We use a method that you know firebase is going to give us.

118
00:07:17,740 --> 00:07:26,770
So we do firebase that storage again DOD then we say ref we want to enter the ref and we do the same

119
00:07:26,770 --> 00:07:27,150
thing.

120
00:07:27,150 --> 00:07:33,700
This the problem that there we enter entering our directory inside storage and then going to say okay

121
00:07:33,940 --> 00:07:41,860
inside this directory We want to find a child and now the child is going to be whatever we have inside

122
00:07:41,860 --> 00:07:42,830
the family.

123
00:07:42,940 --> 00:07:49,290
So this one is going to go and find whatever image you have inside storage with this name.

124
00:07:49,290 --> 00:07:49,900
All right.

125
00:07:50,200 --> 00:07:55,090
So after after that happens it's going to find the you know the file.

126
00:07:55,090 --> 00:08:00,250
So what you want to get it's to get to download your else so you can use it.

127
00:08:00,340 --> 00:08:04,250
And then of course we receive a promise so open and close.

128
00:08:04,750 --> 00:08:06,640
Now we're going to get that you are back.

129
00:08:06,880 --> 00:08:08,660
And then we will run a function.

130
00:08:08,710 --> 00:08:16,570
You know the callback function so what we want to do we want to store that you are l inside of file

131
00:08:16,570 --> 00:08:22,480
your L makes sense and everything is start starting to make sense.

132
00:08:22,870 --> 00:08:30,220
So there's that said state and we say file you are l it's equal to whatever we get from our cell.

133
00:08:30,450 --> 00:08:39,040
And just for fun I'm going to do a console console that log that open and you are just to see what we

134
00:08:39,040 --> 00:08:39,610
get.

135
00:08:41,110 --> 00:08:43,130
So we can upload again and just for fun again.

136
00:08:43,160 --> 00:08:48,450
I'm going to reload firebase and right now we have uploaded one image just one image.

137
00:08:48,460 --> 00:08:56,650
You know that odd item in the image and we get the we should be getting the players directory and it's

138
00:08:56,690 --> 00:08:57,890
a little bit slow.

139
00:08:57,970 --> 00:09:03,930
And inside the directory we get the PNB of this right and the preview.

140
00:09:03,990 --> 00:09:04,690
Very good.

141
00:09:04,830 --> 00:09:07,840
So let's upload again and see what we get right here.

142
00:09:07,850 --> 00:09:09,410
I'm going to upload Starling.

143
00:09:09,420 --> 00:09:10,470
Very good player.

144
00:09:12,220 --> 00:09:13,570
The upload starts.

145
00:09:13,750 --> 00:09:19,740
And I notice that after the upload starts the element the component right here of upload gets removed.

146
00:09:19,900 --> 00:09:26,020
And this is because we are updating the state and right here we said that if we do have a failure or

147
00:09:26,040 --> 00:09:28,400
an L we don't want to show this.

148
00:09:28,420 --> 00:09:31,720
So you know that's why it's been removed.

149
00:09:32,450 --> 00:09:34,380
Oh Amerikay I mean I'm saved.

150
00:09:34,420 --> 00:09:34,980
I made a mistake.

151
00:09:34,990 --> 00:09:36,730
Let me upload it again.

152
00:09:36,730 --> 00:09:41,590
So for that company and other good player that's why they were champions this year.

153
00:09:41,890 --> 00:09:47,410
So we get of course the Emmets you are ill because we are doing the console log right here at the top

154
00:09:48,130 --> 00:09:49,940
and then inside Council argue your else.

155
00:09:49,990 --> 00:09:54,270
So this is the you are l and it's a pretty long your l.

156
00:09:54,310 --> 00:09:56,180
There's no way you can guess.

157
00:09:56,410 --> 00:09:59,340
You can guess this you can not just copy.

158
00:09:59,350 --> 00:10:03,580
You know maybe this you are l and don't and don't do this.

159
00:10:03,610 --> 00:10:10,030
Maybe you want to make a reference to your image and you paste the actual urinal without the name of

160
00:10:10,030 --> 00:10:16,850
your image and you use this as an h a normal h f tack or maybe a source tagging to your image.

161
00:10:16,870 --> 00:10:22,990
It's not going to work because you get a token so you don't know the token.

162
00:10:23,020 --> 00:10:25,380
This is why you will need to do this.

163
00:10:25,410 --> 00:10:27,740
There's no way around this.

164
00:10:28,120 --> 00:10:30,670
But we do get to your L and if I click at

165
00:10:34,030 --> 00:10:34,990
Burgerman.

166
00:10:34,990 --> 00:10:35,740
All right.

167
00:10:36,070 --> 00:10:41,080
So now we have a file name and we have to download your l.

168
00:10:41,170 --> 00:10:47,590
So now what we need to do we need to return back to the parent component.

169
00:10:47,590 --> 00:10:55,270
Now before I want to do this before we do this maybe we are going to finish you know with this component

170
00:10:55,540 --> 00:11:02,650
after we upload the image your l the image we do have a u r l so we can show the uploaded file right

171
00:11:02,650 --> 00:11:03,230
here.

172
00:11:03,430 --> 00:11:04,610
So let's do that right now.

173
00:11:06,900 --> 00:11:14,720
Or it's going to open and I'm going to say if this that state and pretty much the opposite of filed

174
00:11:14,720 --> 00:11:16,290
your L we can do it right here.

175
00:11:16,290 --> 00:11:21,310
No but I'm going to put in a different place so it could be a little bit clearer clearer.

176
00:11:21,380 --> 00:11:21,800
OK.

177
00:11:21,890 --> 00:11:24,870
So if not no.

178
00:11:24,880 --> 00:11:30,670
All right so now we need to show the image and it could be pretty simple.

179
00:11:30,670 --> 00:11:39,290
I've already did this you know in the final projects up class name opening close image then upload then

180
00:11:39,310 --> 00:11:40,610
container.

181
00:11:40,970 --> 00:11:41,680
All right.

182
00:11:42,190 --> 00:11:46,890
So then we do have an image and I'm going to add some styles.

183
00:11:46,900 --> 00:11:48,640
I'm going to make it style of.

184
00:11:48,730 --> 00:11:51,040
And let me first close the tag.

185
00:11:51,040 --> 00:11:51,940
There we go.

186
00:11:52,450 --> 00:11:53,900
So the style.

187
00:11:54,080 --> 00:11:56,900
It's Webware with a whit of 100 percent.

188
00:11:57,030 --> 00:11:57,730
So it's style.

189
00:11:57,730 --> 00:12:02,510
It's equal to some props with of 100 percent.

190
00:12:03,040 --> 00:12:07,290
Right now with image we get a source and the source.

191
00:12:07,390 --> 00:12:14,150
It's this that state that file you are l now the Alt.

192
00:12:14,500 --> 00:12:17,810
I don't know maybe in the name of the image doesn't matter right now.

193
00:12:17,860 --> 00:12:21,430
So there's that state that name doesn't matter.

194
00:12:21,430 --> 00:12:22,390
All right.

195
00:12:22,390 --> 00:12:29,120
And later going to add remove Dave class name equals remove.

196
00:12:29,230 --> 00:12:29,980
All right.

197
00:12:30,250 --> 00:12:42,220
And then when we click going to add and and click listener on click Begin to run a function called this

198
00:12:42,230 --> 00:12:46,480
dot upload again and we are not upload it again.

199
00:12:46,490 --> 00:12:53,210
We're just setting a resetting everything inside of this component to do the upload again.

200
00:12:53,490 --> 00:12:56,140
We're going to do this later because it's real simple.

201
00:12:56,150 --> 00:12:58,900
You're not going to do anything special on this one.

202
00:12:58,900 --> 00:12:59,190
All right.

203
00:12:59,230 --> 00:13:01,150
So let me go again.

204
00:13:01,150 --> 00:13:03,400
So this should be ready.

205
00:13:03,700 --> 00:13:10,070
So if I add a player company again we do the upload.

206
00:13:11,430 --> 00:13:16,730
And when it returns we get we get it right.

207
00:13:16,730 --> 00:13:19,730
So we get the image of the player now impaired.

208
00:13:19,760 --> 00:13:22,400
And then of course we're going to do the remove by click and nothing happens.

209
00:13:22,400 --> 00:13:25,960
We will get an error because we didn't have this upload again function.

210
00:13:26,360 --> 00:13:26,560
Right.

211
00:13:26,570 --> 00:13:29,930
But now know we are uploading image and getting it right here.

212
00:13:30,110 --> 00:13:37,070
So now since inside of this component the file upload or component we have all the data we need to go

213
00:13:37,070 --> 00:13:43,490
back to the parent component which is the player with all the information we need the name of the file

214
00:13:43,520 --> 00:13:48,230
and the location and everything else we need to catch it inside of this function.

215
00:13:48,290 --> 00:13:56,300
We need to go to the update form and update the form because we have a state of image right.

216
00:13:56,420 --> 00:13:58,000
So let's let's do that right now.

217
00:13:58,010 --> 00:14:01,550
Let's go to the next section because again this one went a little bit long.

218
00:14:01,700 --> 00:14:04,830
So let's go to the next one and do all of this.

