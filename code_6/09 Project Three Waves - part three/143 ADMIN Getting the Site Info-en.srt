1
00:00:01,210 --> 00:00:06,230
All right so let's do all the server on the server side part of the you know the site info.

2
00:00:06,340 --> 00:00:08,020
So first we need to model.

3
00:00:08,080 --> 00:00:14,890
So I'm going to go to models right here and create a model called site and remember it's going to be

4
00:00:14,890 --> 00:00:21,730
called and I can tell you something right now if we go to models for example and maybe you didn't notice

5
00:00:22,700 --> 00:00:30,500
you know maybe if you go to models we see brand we see payment product user and what everything is singler.

6
00:00:30,640 --> 00:00:33,940
If I go to brand it's brand everything it's singler.

7
00:00:33,970 --> 00:00:41,590
But if I go to mongoose whenever I go to it goes to Mongul Mungo creates the plural of this so brands

8
00:00:41,590 --> 00:00:43,040
payments products users.

9
00:00:43,070 --> 00:00:46,930
And what's it going to do something and this is of course relevant.

10
00:00:46,930 --> 00:00:51,930
So I'm going to create a model and this one is going to be site not sites or something like that just

11
00:00:51,960 --> 00:00:53,060
site.

12
00:00:53,110 --> 00:00:53,850
All right.

13
00:00:54,160 --> 00:00:58,000
So on the side we just need to bring all the logic right here.

14
00:00:58,120 --> 00:01:05,850
Konst mongoose recalls require and then mongoose or ago.

15
00:01:06,070 --> 00:01:14,850
Then we need to create this schema so Konst site schema right equals mongoose.

16
00:01:15,250 --> 00:01:24,700
Then schema schema open and close and we pass an object that of course Konst Konst then side with a

17
00:01:24,700 --> 00:01:27,970
capital S equals mongoose.

18
00:01:28,000 --> 00:01:30,550
We passed that model just like we did before.

19
00:01:30,670 --> 00:01:36,490
And we say that this one is capital S side coma and then we pass this side schema right.

20
00:01:36,520 --> 00:01:38,020
Just like that before.

21
00:01:38,110 --> 00:01:38,960
Piece of cake.

22
00:01:39,370 --> 00:01:44,580
Then module that exports equals and we export.

23
00:01:44,610 --> 00:01:48,070
Cite this site for forget.

24
00:01:48,400 --> 00:01:50,010
So how are we going to do this.

25
00:01:50,050 --> 00:01:56,140
So later like I told you again we're going to hold up the contact information and maybe some relevant

26
00:01:56,200 --> 00:01:57,710
information about the website.

27
00:01:57,910 --> 00:02:03,760
But we also are going to do the home this one so we can have several pieces of information inside the

28
00:02:03,760 --> 00:02:06,050
site info or the site.

29
00:02:06,070 --> 00:02:12,040
So again is again is saving going to store everything in a single a single document and inside of that

30
00:02:12,040 --> 00:02:15,630
document of course we're going to get all the information we need.

31
00:02:15,760 --> 00:02:19,770
So going to create two places one called featured.

32
00:02:20,120 --> 00:02:26,020
So inside feature we're going to host everything that got to do with the you know this one.

33
00:02:26,020 --> 00:02:27,540
And of course we're going to do it later.

34
00:02:27,700 --> 00:02:31,240
So this one is going to be required.

35
00:02:31,290 --> 00:02:32,460
True.

36
00:02:33,400 --> 00:02:40,390
And that coma type of array type and then array coma.

37
00:02:41,290 --> 00:02:47,350
And each side of the array which is going to be the default as in re begin to store all the information

38
00:02:47,350 --> 00:02:48,200
about the feature.

39
00:02:48,440 --> 00:02:53,140
Later we're going to do the promotion or home promotion and we can have a different key called home

40
00:02:53,140 --> 00:02:54,980
promotion or something like that.

41
00:02:55,060 --> 00:03:01,310
But the thing is that when we do when we do an update we enter the key that we need to do the update.

42
00:03:01,330 --> 00:03:04,510
For example if you want to update the site we will not enter to this one.

43
00:03:04,510 --> 00:03:09,480
We will enter to the next one which is site info something like this.

44
00:03:09,490 --> 00:03:10,370
Right.

45
00:03:10,870 --> 00:03:14,980
So we're using a single document to host many many things.

46
00:03:14,980 --> 00:03:20,800
So this one again just like this one it's pretty much the same thing required true and blah blah blah

47
00:03:20,800 --> 00:03:22,130
blah blah Vergon.

48
00:03:22,240 --> 00:03:27,540
So now we have the model of course we need to import the site from to the server.

49
00:03:27,580 --> 00:03:34,990
So I'm going to close the model I'm going to go to the server right here top and we need to Konst site

50
00:03:35,760 --> 00:03:42,220
equals require open and close for Slash.

51
00:03:42,220 --> 00:03:46,340
We go to models of models.

52
00:03:47,010 --> 00:03:47,980
Well models.

53
00:03:48,190 --> 00:03:51,800
And then it's going to be of course site.

54
00:03:52,120 --> 00:03:52,890
Right.

55
00:03:53,080 --> 00:03:55,380
So now we have the model right here.

56
00:03:55,380 --> 00:04:01,430
So are going to go at the very very end of the application we're going to do and get a copy and see

57
00:04:01,450 --> 00:04:03,510
if I can find it I can copy this.

58
00:04:03,670 --> 00:04:05,180
I'm going to go right at the end.

59
00:04:05,260 --> 00:04:08,390
So you know where to find it on the final code.

60
00:04:08,650 --> 00:04:11,030
And this one is going to be sacked.

61
00:04:11,290 --> 00:04:13,420
So right here we're going to get all the side routes.

62
00:04:13,420 --> 00:04:18,840
So now we have a model year including the model on the server on the server file so we can create the

63
00:04:18,850 --> 00:04:25,510
routes and we need two routes one to get the data and the other one to update the data.

64
00:04:25,660 --> 00:04:26,120
Right.

65
00:04:26,290 --> 00:04:28,570
So going to go to app are going to create the route.

66
00:04:28,600 --> 00:04:30,330
Right now at least they want to get it.

67
00:04:30,520 --> 00:04:33,550
So app and this one is going to be get.

68
00:04:33,810 --> 00:04:41,470
So the route is going to be API for Slash the site for Slash and side underscore data.

69
00:04:41,760 --> 00:04:48,460
No we don't need an entity middle middleware right here because we're going to get it from the home

70
00:04:49,060 --> 00:04:50,410
or actually for the footer.

71
00:04:50,620 --> 00:04:52,690
So request and response.

72
00:04:52,690 --> 00:04:57,970
So the only thing we're going to do right here is enter a signed site and bring everything.

73
00:04:58,180 --> 00:05:05,200
So I'm going to go to a site I'm going to find open open like this and I'm going to say OK I want to

74
00:05:05,200 --> 00:05:12,740
bring everything that you get inside the site part of the database and then we just run the callback.

75
00:05:13,060 --> 00:05:15,520
So we get an error and a.

76
00:05:15,550 --> 00:05:18,440
And the site actually the site information.

77
00:05:18,460 --> 00:05:23,830
So of course if we get an error and I'm just going to copy this we if we get an error I'm going to send

78
00:05:24,140 --> 00:05:32,250
a status of 400 and then send error just like that.

79
00:05:32,260 --> 00:05:33,430
Very simple.

80
00:05:33,430 --> 00:05:39,640
Now of course if everything goes OK which it will I'm going to say send status 200.

81
00:05:39,940 --> 00:05:43,870
And now what I want to send is going to be let me do the scent first.

82
00:05:43,900 --> 00:05:47,780
It's going to be whatever we get inside the site right here.

83
00:05:47,890 --> 00:05:52,450
But we need you know kind of a different piece of information maybe later we can change it.

84
00:05:52,450 --> 00:05:58,770
But right now the only thing I want to get is that these the things we have right here the site info.

85
00:05:58,840 --> 00:06:01,380
I don't care about the featured images.

86
00:06:01,480 --> 00:06:03,070
I just want to get this one.

87
00:06:03,070 --> 00:06:08,260
So since here you are pretty much bringing all the doc everything all the document right here.

88
00:06:08,290 --> 00:06:11,430
You know we are bringing feature inside info.

89
00:06:11,500 --> 00:06:12,530
I'm going to say OK.

90
00:06:12,670 --> 00:06:18,390
Give me the site but I want just the information that it's inside the site info.

91
00:06:18,840 --> 00:06:21,810
So it calcite info right site info.

92
00:06:21,820 --> 00:06:22,590
Yeah.

93
00:06:23,230 --> 00:06:29,680
So in the media on the front and what we will be getting is just inside info and then we will send this

94
00:06:29,680 --> 00:06:31,040
information to the footer.

95
00:06:31,210 --> 00:06:33,420
And you know bubbletop everything else.

96
00:06:33,580 --> 00:06:37,920
All right for now we are get we need to we need to update.

97
00:06:37,930 --> 00:06:39,960
But can it do we can to do it later.

98
00:06:40,180 --> 00:06:47,600
Now the thing is that we have a route making a request for this information but we don't have this information.

99
00:06:47,680 --> 00:06:50,070
We don't have it at all right.

100
00:06:50,170 --> 00:06:51,710
So what do we need to do.

101
00:06:51,820 --> 00:06:52,260
We can end it.

102
00:06:52,330 --> 00:06:55,000
We going to need to manually create a collection.

103
00:06:55,180 --> 00:06:57,010
So I going to go create a collection.

104
00:06:57,070 --> 00:06:58,930
And remember that everything is plural.

105
00:06:58,930 --> 00:07:03,550
So this one is going to be sites I can create.

106
00:07:03,610 --> 00:07:05,720
And now we have sites right.

107
00:07:05,740 --> 00:07:10,300
Going to show you how the structure is going to go have the finished one right here.

108
00:07:10,300 --> 00:07:17,080
Notice that I get to sites and it's going to be just one document just one with all the information

109
00:07:17,080 --> 00:07:17,920
we need inside.

110
00:07:18,040 --> 00:07:22,290
You know the id the name which is going to be site info or whatever.

111
00:07:22,300 --> 00:07:27,700
You know you could actually not get this one but you can pretty much what you can get is featured and

112
00:07:27,720 --> 00:07:36,330
the site info actually an array just like this so I'm going to do this I'm going to edit and this is

113
00:07:36,330 --> 00:07:37,640
what we need to get.

114
00:07:37,650 --> 00:07:43,740
So I'm going to copy this one and you will need to of course pretty much do it by hand.

115
00:07:43,950 --> 00:07:45,700
But don't worry I can give you time.

116
00:07:45,860 --> 00:07:48,460
I'm going to cancel and I'm going to go to our waves.

117
00:07:48,600 --> 00:07:54,420
I'm going to go to sites and I'm going to inject I'm going to create a new document insert documents

118
00:07:54,780 --> 00:07:56,860
can I select all and paste it.

119
00:07:57,050 --> 00:08:02,760
Now since you're going to be entering this manually you don't need the object I.D. So you don't really

120
00:08:02,760 --> 00:08:03,560
need it.

121
00:08:03,600 --> 00:08:04,710
We don't need the name.

122
00:08:04,800 --> 00:08:07,440
We just need the feature and the site info.

123
00:08:07,530 --> 00:08:08,210
It's a feature.

124
00:08:08,250 --> 00:08:10,670
It's an empty right site info.

125
00:08:10,770 --> 00:08:12,710
And mine is mine XP.

126
00:08:13,020 --> 00:08:14,080
And the site info.

127
00:08:14,100 --> 00:08:16,640
It's an array with an object inside.

128
00:08:16,920 --> 00:08:20,790
Now this object key contains key value pairs right.

129
00:08:20,930 --> 00:08:22,010
You get the address.

130
00:08:22,080 --> 00:08:27,000
And if we go to update site info it's pretty much the same thing we get.

131
00:08:27,000 --> 00:08:27,830
We get right here.

132
00:08:27,830 --> 00:08:33,880
So make sure that the key names the keys are you know pretty much the same address address.

133
00:08:34,020 --> 00:08:34,830
We get ours.

134
00:08:34,860 --> 00:08:40,440
We get ours get phone we get phone and e-mail e-mail right.

135
00:08:40,440 --> 00:08:45,320
So I'm going to save this and I a mistake someplace.

136
00:08:45,320 --> 00:08:46,180
There we go.

137
00:08:46,290 --> 00:08:52,040
I'm going to save it and advocate sites we get one result with the idea of course.

138
00:08:52,080 --> 00:08:56,290
And the featured but we do have some site information right.

139
00:08:56,520 --> 00:09:01,860
So in theory if I go to this route we should be getting it right.

140
00:09:01,950 --> 00:09:02,450
OK.

141
00:09:02,760 --> 00:09:05,400
So I'm going to go to postman and you don't need to do this.

142
00:09:05,520 --> 00:09:08,340
I'm just going to test it right here with you.

143
00:09:09,040 --> 00:09:13,370
So I'm going to open I believe we were using the U r l u r l.

144
00:09:13,800 --> 00:09:15,720
I'm on the waifs environment.

145
00:09:15,900 --> 00:09:21,990
So it's a u r l than we do for Slash and it's API site data.

146
00:09:22,350 --> 00:09:26,480
So if you make a request here we should be getting the site information.

147
00:09:26,490 --> 00:09:28,110
So let's see what happens.

148
00:09:28,410 --> 00:09:35,760
I consent and we get you know an irate with an object inside that says address our phones and e-mail.

149
00:09:35,910 --> 00:09:38,110
So we are getting the information.

150
00:09:38,160 --> 00:09:45,660
So now we are ready of course to go to update site info and dispatch an action to get you know all the

151
00:09:45,660 --> 00:09:51,610
data and pre-populated everything inside our form right here.

152
00:09:51,900 --> 00:09:53,060
So let's do that right now.

153
00:09:53,250 --> 00:09:57,540
OK so let's go to the producer and create a valid use for this.

154
00:09:57,540 --> 00:09:59,580
So when did you go to site action.

155
00:09:59,640 --> 00:10:00,050
Right.

156
00:10:00,060 --> 00:10:00,580
OK.

157
00:10:00,810 --> 00:10:02,030
So we need to import types.

158
00:10:02,040 --> 00:10:03,660
Right now we don't have a type for this.

159
00:10:03,810 --> 00:10:07,820
So we need to create it I'm going to call it get site data or something like that.

160
00:10:07,830 --> 00:10:10,140
You can again choose whatever you want.

161
00:10:10,230 --> 00:10:12,110
Zeid data.

162
00:10:12,420 --> 00:10:14,100
So we need to add it to types.

163
00:10:14,100 --> 00:10:19,600
So I'm going to go to types and I'm going to split this and export it will do the same thing.

164
00:10:19,620 --> 00:10:26,320
Export Konst get side data and then get site data right.

165
00:10:26,340 --> 00:10:28,910
So now we have the action and we have a type.

166
00:10:28,920 --> 00:10:31,610
Now we need a function or something right here.

167
00:10:31,680 --> 00:10:39,000
So I'm going to create an export function called Get site data open and close.

168
00:10:39,000 --> 00:10:42,840
So this one it's really simple we just need to make a request that you are l and that's it.

169
00:10:42,840 --> 00:10:48,120
So Konst request equals ASIO's that get for Slash.

170
00:10:48,150 --> 00:10:53,470
And we have the site server right here so we going to use template strengths are going to pass the site

171
00:10:53,470 --> 00:10:55,470
server then for Slash.

172
00:10:55,470 --> 00:10:59,400
And I believe we called this site data right.

173
00:10:59,530 --> 00:11:02,410
Data going to go and say Okay.

174
00:11:02,460 --> 00:11:11,820
So then we can at open catch the response you know usual stuff and returned response that data then

175
00:11:11,820 --> 00:11:13,980
we need to return a type and a payload.

176
00:11:14,160 --> 00:11:26,630
So we turn open and then type of gets data and then payload bay load off of request.

177
00:11:26,700 --> 00:11:28,750
Sometimes I make weird noises.

178
00:11:28,770 --> 00:11:29,390
Sorry.

179
00:11:29,640 --> 00:11:31,820
So request Burguet.

180
00:11:31,980 --> 00:11:33,880
Now we have to get side data.

181
00:11:34,050 --> 00:11:35,510
What do we need to do next.

182
00:11:35,670 --> 00:11:37,100
At a reduced or ryme.

183
00:11:37,260 --> 00:11:44,130
So I'm going to go to every company gets data go to the producer and it's going to be site reducer and

184
00:11:44,130 --> 00:11:45,770
we need to import from types.

185
00:11:45,810 --> 00:11:50,220
So import types and then get site data right.

186
00:11:50,250 --> 00:11:51,900
So this one really simple.

187
00:11:52,140 --> 00:12:01,710
If the case is that we get side data we can return whatever we get inside the DOD state state coma and

188
00:12:01,710 --> 00:12:11,720
then side data call an action that payload write looks nice now everything's ready.

189
00:12:11,720 --> 00:12:13,340
Everything's ready to go.

190
00:12:13,470 --> 00:12:15,860
This has dispatched the action.

191
00:12:16,280 --> 00:12:23,230
So I'm going to go to update site info and since we need the information from here so we can pre-populated

192
00:12:23,240 --> 00:12:28,440
everything we need to do a component that mount right just like it before it.

193
00:12:28,520 --> 00:12:33,950
I'm going to copy the name of the function get side data and I'm going to import it right here at the

194
00:12:33,950 --> 00:12:36,650
top you know below the connect.

195
00:12:36,680 --> 00:12:47,110
So import open and close get side data from the action so that that force last one more one more and

196
00:12:47,110 --> 00:12:50,670
and actions and then side actions.

197
00:12:50,810 --> 00:12:52,190
Right.

198
00:12:52,340 --> 00:12:53,600
Nothing so far.

199
00:12:53,900 --> 00:12:59,060
I'm going to go right here to the component that mount are going to do a component that mounts so we

200
00:12:59,060 --> 00:13:03,350
can fetch that information component that mount.

201
00:13:03,350 --> 00:13:12,450
Then we open it and we do this that probs dot this patch and then we do get site data.

202
00:13:12,590 --> 00:13:20,040
And whenever we get that data back then we do it then and we do a function and we run the callback.

203
00:13:20,060 --> 00:13:26,730
So again we need to Prete populate this form fields with the data we get from Get side data.

204
00:13:26,930 --> 00:13:32,660
So just be sure to get a console log it because maybe you get an error.

205
00:13:32,660 --> 00:13:36,670
So I want to inspect this stuff Propst that site.

206
00:13:36,710 --> 00:13:37,110
Right.

207
00:13:37,130 --> 00:13:40,030
We are doing map state prompts for a site.

208
00:13:40,280 --> 00:13:42,800
And there's one more thing we didn't I didn't do.

209
00:13:42,920 --> 00:13:45,720
Maybe you know side data.

210
00:13:45,830 --> 00:13:51,040
So remember that from the data the response is an array.

211
00:13:51,110 --> 00:13:53,990
So I'm going to answer that site data and bring the array.

212
00:13:54,080 --> 00:13:58,370
So while I'm creating this as an array right why am I using an array.

213
00:13:58,370 --> 00:14:04,370
The thing is that later outside we might have many many things inside and maybe I would like to add

214
00:14:04,610 --> 00:14:10,580
different things inside site info not just decide if you want to add a different object inside the array

215
00:14:10,910 --> 00:14:13,070
that contains something else.

216
00:14:13,190 --> 00:14:17,390
So I know that the first position on the array is going to be the site info and the next one is going

217
00:14:17,390 --> 00:14:19,220
to be whatever something else.

218
00:14:19,220 --> 00:14:21,410
So I can add multiple things right here.

219
00:14:21,470 --> 00:14:23,990
That's why I'm not just using what single object.

220
00:14:23,990 --> 00:14:30,500
But again you can do it whatever your own style just can use an object within a key and then you have

221
00:14:30,500 --> 00:14:31,840
a key which has that info.

222
00:14:31,850 --> 00:14:36,820
And then inside you have a different object you can completely do that no problem.

223
00:14:37,070 --> 00:14:38,220
Totally do that.

224
00:14:38,340 --> 00:14:38,770
All right.

225
00:14:38,810 --> 00:14:40,490
But let's get on the cold side.

226
00:14:40,550 --> 00:14:42,000
I don't eat it.

227
00:14:42,720 --> 00:14:43,100
OK.

228
00:14:43,160 --> 00:14:49,150
So now I'm going to cause luck and I'm going to of course get the information the way we want.

229
00:14:49,280 --> 00:14:55,150
But the thing is that what I didn't do is to add the side reducer right here.

230
00:14:55,250 --> 00:14:58,220
So we were not going to get anything so import.

231
00:14:58,540 --> 00:15:10,830
I can call a sight from that for Slash and then side reduce or and then say coma site right enough.

232
00:15:10,880 --> 00:15:16,940
So from here the only thing we need to do is to create a barbell called again whatever you want.

233
00:15:16,940 --> 00:15:24,120
In this case form data because it makes sense in its new form data you and then form data.

234
00:15:24,320 --> 00:15:29,870
And this one is going to be equal to the populate fields we created at the top.

235
00:15:29,920 --> 00:15:36,410
So going to copy are going to bring the populate fields so we can pre populate all the fields we need

236
00:15:36,410 --> 00:15:39,720
to pass that this state that form data.

237
00:15:39,830 --> 00:15:41,780
That's what this function needs.

238
00:15:41,780 --> 00:15:43,330
And then let me close this.

239
00:15:43,350 --> 00:15:45,980
You're going to need pretty much the response from the server.

240
00:15:46,130 --> 00:15:46,570
Right.

241
00:15:46,580 --> 00:15:50,790
Whenever we get injected inside side data through prompts.

242
00:15:50,960 --> 00:15:51,280
Right.

243
00:15:51,290 --> 00:15:52,340
That's the first thing.

244
00:15:52,460 --> 00:16:01,550
And then we do this that set stayed open and close and we saved form data and it's equal to new form

245
00:16:01,580 --> 00:16:02,750
data.

246
00:16:02,750 --> 00:16:03,400
All right.

247
00:16:05,100 --> 00:16:06,070
There you go.

248
00:16:06,550 --> 00:16:08,170
So let's see if this works.

249
00:16:08,170 --> 00:16:19,860
Hopefully no arse so when our side reducer cannot resolve types in reducers OK so I possibly can save

250
00:16:19,860 --> 00:16:20,620
some time.

251
00:16:20,700 --> 00:16:22,560
So I've got two mistakes.

252
00:16:22,590 --> 00:16:26,600
The first one is dot dot for Slash actions and then types.

253
00:16:26,610 --> 00:16:27,660
That's the first thing.

254
00:16:27,840 --> 00:16:34,380
And then each side of the update info I'm not passing the maps data prompts to reload it.

255
00:16:34,380 --> 00:16:40,500
We get the information and we are populating everything correctly so everything is get the own thing

256
00:16:40,500 --> 00:16:46,400
we need to do now is to create a route inside the server so we can update you know we can send the post

257
00:16:47,010 --> 00:16:51,900
create a post route so we can send the request and update the information here and we're going to be

258
00:16:51,900 --> 00:16:54,530
adding you know the dynamic information.

259
00:16:54,540 --> 00:16:57,870
That's why we are doing all of this instead of the future footer.

260
00:16:57,910 --> 00:17:01,090
We're going to be connecting to the side getting the information about the side.

261
00:17:01,200 --> 00:17:03,390
And of course passing the props right here.

262
00:17:03,450 --> 00:17:05,650
So let's get to the next one and do that.

