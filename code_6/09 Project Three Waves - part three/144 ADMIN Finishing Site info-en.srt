1
00:00:01,420 --> 00:00:03,620
All right so let's create the route for this.

2
00:00:03,640 --> 00:00:09,600
So it's going to be app post opening close and we need to pass pretty much same thing than this one.

3
00:00:09,970 --> 00:00:10,600
So OK.

4
00:00:10,780 --> 00:00:14,920
We do need the south more aware and we need the admin middleware.

5
00:00:14,980 --> 00:00:21,890
And then of course we run a function with request and response right copy request and response.

6
00:00:21,890 --> 00:00:30,920
Now if you think about this inside of the sites we only get one document so we can find it by what by

7
00:00:30,920 --> 00:00:31,540
ID.

8
00:00:31,550 --> 00:00:36,290
What happens if you don't really have the ID or what copy of the ID.

9
00:00:36,670 --> 00:00:37,250
I don't know.

10
00:00:37,340 --> 00:00:39,270
So you could yeah totally could.

11
00:00:39,320 --> 00:00:40,070
What are you going to do.

12
00:00:40,080 --> 00:00:44,240
I'm going to create I'm going to edit the document and I'm going to add a name to this.

13
00:00:44,240 --> 00:00:46,690
Remember we had a name I just deleted this.

14
00:00:47,030 --> 00:00:53,660
So you know I going to go below the I.D. and I'm going to say OK so the name for this whole section

15
00:00:53,960 --> 00:00:57,990
it's site just like this and then coma.

16
00:00:58,100 --> 00:00:59,290
And I'm going to save it.

17
00:00:59,660 --> 00:01:04,670
So now instead of this document we have a name so we have a reference to you know to find it by what

18
00:01:04,740 --> 00:01:05,780
we want.

19
00:01:05,790 --> 00:01:06,220
All right.

20
00:01:06,410 --> 00:01:09,520
So I'm going to go and say I want to enter the side.

21
00:01:09,830 --> 00:01:15,790
I want to find an update the one that calls cite as a name right.

22
00:01:16,120 --> 00:01:17,450
So there is one way to do it.

23
00:01:17,450 --> 00:01:21,530
Name Of course you could do something else if you wish.

24
00:01:21,560 --> 00:01:23,030
Completely up to you.

25
00:01:23,270 --> 00:01:28,460
So now we're going to find this name and the thing is that we don't want to update all the information

26
00:01:28,460 --> 00:01:29,720
we get inside of here.

27
00:01:29,740 --> 00:01:32,680
We just want to update site info on this case.

28
00:01:32,930 --> 00:01:33,610
OK.

29
00:01:34,310 --> 00:01:36,690
So we're going to go and pass this.

30
00:01:36,770 --> 00:01:41,300
So when I'm going to do I'm going to set it we're going to set the whole orbed you know.

31
00:01:41,330 --> 00:01:44,350
So the whole information we have inside the site info.

32
00:01:44,510 --> 00:01:51,830
So I'm going to say I want to enter the site site and that info and this key it's equal to this key

33
00:01:53,000 --> 00:01:53,860
and the site info.

34
00:01:53,870 --> 00:01:54,340
I'm going to say.

35
00:01:54,350 --> 00:01:54,600
OK.

36
00:01:54,620 --> 00:02:00,080
So now the new state of this new values are going to be whatever we get from the body.

37
00:02:00,290 --> 00:02:03,590
So you always need to pass pretty much all the information.

38
00:02:03,650 --> 00:02:11,300
So I'm going to do Khoa I'm going to say new equals true and then coma and then we run a function with

39
00:02:11,300 --> 00:02:11,710
error.

40
00:02:11,750 --> 00:02:13,030
And the documents are.

41
00:02:13,090 --> 00:02:20,550
And Doc now again just like before if we get an error I'm going to send the 400 or we can said we sell

42
00:02:20,570 --> 00:02:22,710
a Jason we can do that Jason.

43
00:02:23,090 --> 00:02:28,040
And we sense success falls and then the air.

44
00:02:28,730 --> 00:02:36,630
And if everything goes OK I want to return our response with a status of 200 just like this.

45
00:02:36,710 --> 00:02:39,820
Then we do send and we sent them Jason.

46
00:02:39,830 --> 00:02:41,360
So I'm going to send the same success.

47
00:02:41,390 --> 00:02:42,170
So success.

48
00:02:42,170 --> 00:02:44,000
True coma.

49
00:02:44,450 --> 00:02:45,340
And I'm going to send.

50
00:02:45,390 --> 00:02:47,890
I want to return just to site info.

51
00:02:47,990 --> 00:02:50,770
So I'm going to do site info and this one.

52
00:02:50,780 --> 00:02:56,840
It's inside the doc that we get back whenever we update and whenever we update of course we get the

53
00:02:56,840 --> 00:02:59,650
whole document back everything.

54
00:02:59,660 --> 00:03:04,370
So I want to return just to Doc and whatever I get inside site info.

55
00:03:04,970 --> 00:03:07,540
And that's it for me.

56
00:03:07,550 --> 00:03:08,900
That's nice.

57
00:03:08,900 --> 00:03:09,230
All right.

58
00:03:09,230 --> 00:03:12,790
So now we have a right of course we need to create.

59
00:03:12,800 --> 00:03:17,670
Go to the site actions and at the you know the update logic.

60
00:03:17,690 --> 00:03:23,390
So first like for going to do the type so Update site data.

61
00:03:23,690 --> 00:03:24,470
Right.

62
00:03:24,530 --> 00:03:25,660
Going to create a function.

63
00:03:25,670 --> 00:03:34,770
Real quick export function and update update site data.

64
00:03:34,820 --> 00:03:36,040
Open and Close.

65
00:03:36,140 --> 00:03:44,880
Now of course this one is going to be getting the data at this med so data to to see met.

66
00:03:45,230 --> 00:03:48,420
And then of course we need to make the request very simple.

67
00:03:48,440 --> 00:03:55,610
Pretty much the same that this one can copy and paste and this one is going to be a post request and

68
00:03:55,700 --> 00:04:00,290
as an argument we need to pass data to submit so data to submit.

69
00:04:00,320 --> 00:04:06,050
That of course we return same thing response that data are going to copy this one pasted at the bottom

70
00:04:06,110 --> 00:04:08,770
and make it a little bit nicer.

71
00:04:09,540 --> 00:04:10,260
All right.

72
00:04:10,680 --> 00:04:17,150
And we return to type update site data and whatever we get back from the request.

73
00:04:17,160 --> 00:04:19,240
Now let's go to the site reducer.

74
00:04:19,250 --> 00:04:26,250
I'm going to bring to type and I'm going to say OK if the case is that we get site data we're going

75
00:04:26,250 --> 00:04:27,810
to return something.

76
00:04:27,870 --> 00:04:28,250
Right.

77
00:04:28,320 --> 00:04:28,790
OK.

78
00:04:28,890 --> 00:04:35,550
So what we're going to be returning is they of course dot dot dot dot state coma and are going to change

79
00:04:35,550 --> 00:04:36,730
this data.

80
00:04:36,750 --> 00:04:42,450
So whenever we make some changes right here since we are displaying all the site type data of course

81
00:04:42,450 --> 00:04:46,800
we don't get it through prop's everything is going to get updated.

82
00:04:46,830 --> 00:04:47,380
All right.

83
00:04:49,580 --> 00:04:55,960
I'm going to go and say action that payload and this time I just want to bring the site info.

84
00:04:56,040 --> 00:05:00,900
Remember from the server we are returning key with site info.

85
00:05:00,900 --> 00:05:03,400
So that's the one I want to get inside of here.

86
00:05:04,990 --> 00:05:06,150
That looks nice.

87
00:05:06,410 --> 00:05:07,660
So we're going to close it.

88
00:05:07,670 --> 00:05:08,890
I don't need it.

89
00:05:08,990 --> 00:05:13,370
I'm going to leave this one open and I'm going to go back to update site info.

90
00:05:13,580 --> 00:05:19,340
So on this one of course we need the update site data which is the name of the dispatch know the action

91
00:05:19,750 --> 00:05:21,830
and I'm going to bring it right here at the top.

92
00:05:21,830 --> 00:05:26,310
So now we need to dispatch whenever we of course submit the form.

93
00:05:26,450 --> 00:05:32,320
So go here and say instead of cancel log data to submit.

94
00:05:32,340 --> 00:05:40,490
You're going to say this that probs that dispatch opening close and then update site data and we passed

95
00:05:40,490 --> 00:05:48,820
the data to submit then we do something else which is going to be just a function and we do something.

96
00:05:48,830 --> 00:05:53,330
So when I wanted to do I want to change the state to form success to true.

97
00:05:53,480 --> 00:06:02,690
So that set stayed open and close and then we say form success equals to true.

98
00:06:02,690 --> 00:06:09,240
So this one will just play at the bottom the you know success in a green day.

99
00:06:09,890 --> 00:06:13,470
And after a couple seconds I went to you know remove that state.

100
00:06:13,490 --> 00:06:17,420
So opening close we do a set time out because of this.

101
00:06:17,420 --> 00:06:18,740
Nothing new so far.

102
00:06:18,950 --> 00:06:21,460
We run a function.

103
00:06:21,600 --> 00:06:21,950
All right.

104
00:06:22,010 --> 00:06:27,980
And we do this that said state and we just change it back to false.

105
00:06:28,310 --> 00:06:32,820
So him success do false.

106
00:06:33,380 --> 00:06:37,700
And of course the set timeout meets the time of two seconds.

107
00:06:39,280 --> 00:06:41,550
All right let's give it a try.

108
00:06:41,590 --> 00:06:42,540
Let's see what happens.

109
00:06:44,230 --> 00:06:48,080
All right of course update site data.

110
00:06:48,100 --> 00:06:53,560
Oh we didn't added to types so types the name of the type.

111
00:06:53,550 --> 00:06:54,840
It's update site data.

112
00:06:54,850 --> 00:06:55,820
So.

113
00:06:56,410 --> 00:06:56,780
Right.

114
00:06:56,780 --> 00:07:00,640
And this is pretty much the last thing we're going to do with related to this.

115
00:07:01,090 --> 00:07:03,630
And inside of this round of course.

116
00:07:04,090 --> 00:07:10,050
So update site data right.

117
00:07:11,500 --> 00:07:12,850
Let's see what we get.

118
00:07:13,360 --> 00:07:13,890
OK.

119
00:07:14,140 --> 00:07:17,050
At least we get no you know error message.

120
00:07:17,050 --> 00:07:21,430
So Kramer four five six seven 20 whatever.

121
00:07:21,600 --> 00:07:24,130
I can update success.

122
00:07:24,130 --> 00:07:24,620
All right.

123
00:07:24,730 --> 00:07:29,270
So if I reload the application we get you know the correct values.

124
00:07:29,340 --> 00:07:36,990
And if I do one two three four five six seven eight maybe eight or maybe the area code.

125
00:07:37,090 --> 00:07:37,400
I know.

126
00:07:37,410 --> 00:07:38,940
Sixteen sixty eight.

127
00:07:38,950 --> 00:07:45,200
I don't know what kind of area code is that so Update are going to reload it and everything gets updated.

128
00:07:45,200 --> 00:07:46,550
You know it was updated.

129
00:07:47,110 --> 00:07:47,830
So good.

130
00:07:48,040 --> 00:07:49,940
So again we did all of this.

131
00:07:50,170 --> 00:07:56,290
And the sole purpose of doing all of this is to fetch the information dynamically at least on the router.

132
00:07:56,530 --> 00:08:01,720
So we're going to take five minutes I'm going to pause for a minute and we're going to do this can go

133
00:08:01,720 --> 00:08:03,390
to the footer to the section.

134
00:08:03,400 --> 00:08:08,080
You know does sexually the layout and going to fetch the site data.

135
00:08:08,260 --> 00:08:15,980
So let's add the dynamic information right here and now if we thought we think for five seconds I could

136
00:08:16,000 --> 00:08:16,770
close all of this.

137
00:08:16,780 --> 00:08:18,740
I don't need it to close it.

138
00:08:19,150 --> 00:08:23,090
So we can inject the information right here in a dynamic way.

139
00:08:23,110 --> 00:08:29,320
Now you could do it you could go to the footer just for and create make this you know a different component

140
00:08:29,590 --> 00:08:32,020
and bring Greta right here and do the connect.

141
00:08:32,020 --> 00:08:34,380
The thing is what happens if we need this.

142
00:08:34,440 --> 00:08:37,870
We need something from the data inside of the header.

143
00:08:38,140 --> 00:08:44,890
So I believe it's a better idea to put it on the seat on the high or the components on we find it.

144
00:08:44,890 --> 00:08:47,180
There you go inside lay out.

145
00:08:47,230 --> 00:08:51,460
So right here we're going to bring redux and we're going to you know pass the props to the footer and

146
00:08:51,460 --> 00:08:57,260
later of course if we need we can do it to Hetter right OK.

147
00:08:57,280 --> 00:08:59,100
That dog.

148
00:09:00,080 --> 00:09:00,510
OK.

149
00:09:00,550 --> 00:09:02,660
So we're going to bring redux.

150
00:09:02,770 --> 00:09:10,090
So import connect and it's going to be from that forward slash.

151
00:09:10,090 --> 00:09:10,420
OK.

152
00:09:10,450 --> 00:09:10,700
OK.

153
00:09:10,700 --> 00:09:16,240
Sorry re-act redux react redux.

154
00:09:16,270 --> 00:09:16,880
There we go.

155
00:09:16,930 --> 00:09:20,900
So one thing let's do then we need to import to get side data.

156
00:09:20,920 --> 00:09:27,460
We created a couple of minutes to go get site data and it's going to be from that that forward slash

157
00:09:29,740 --> 00:09:32,930
actions for Slash site actions.

158
00:09:33,250 --> 00:09:35,260
So now we can make the request of course.

159
00:09:35,260 --> 00:09:39,810
Now we are using Kinect so we need to bring Kinect open and close.

160
00:09:39,910 --> 00:09:46,730
We need to wrap up play out Rigaud and I'm going to do the math teacher props now so I don't forget.

161
00:09:46,750 --> 00:09:48,880
So map state props.

162
00:09:49,120 --> 00:09:52,860
We bring the buildings and we need the site.

163
00:09:52,960 --> 00:09:55,130
So there's that state that site.

164
00:09:55,210 --> 00:10:01,060
So now all the information is going to get injected inside Propst and we pass the maps stage props right

165
00:10:01,060 --> 00:10:03,720
here real simple.

166
00:10:03,720 --> 00:10:11,260
Now I'm going to go right here and on the component that Mount component did mount I'm going to do the

167
00:10:11,260 --> 00:10:14,600
request I'm going to you know dispatched the action.

168
00:10:14,610 --> 00:10:21,090
Now the thing is that I want to check if I don't have information because this component this layout.

169
00:10:21,190 --> 00:10:23,910
This one right here the top the header and footer.

170
00:10:23,950 --> 00:10:28,780
They're going to be rendered IMAO and they're going to be mounted every time we go to a route.

171
00:10:28,960 --> 00:10:35,350
So if we just do the dispatch instead of here every time we get you know we mount this the header and

172
00:10:35,350 --> 00:10:40,720
footer which is the HAMC we can do that dispatch a thousand times.

173
00:10:40,750 --> 00:10:41,930
I don't want to do this.

174
00:10:41,950 --> 00:10:46,740
So first I want to do I want to check if we already have information.

175
00:10:46,750 --> 00:10:51,670
Now the thing is that the inside of this that props that side what we get it's pretty much in a.

176
00:10:51,790 --> 00:10:54,240
So I guess I'm going to do this.

177
00:10:54,250 --> 00:10:57,820
I'm going to do object when you do it right.

178
00:10:58,270 --> 00:10:58,750
OK.

179
00:10:58,810 --> 00:11:03,790
Object just like this dot checked keys opening close.

180
00:11:04,050 --> 00:11:07,670
And this that props that side.

181
00:11:08,050 --> 00:11:14,840
And I'm going to check the length and if it's equal to zero then we're going to go and fetch it.

182
00:11:14,950 --> 00:11:16,540
And it's because we didn't have it.

183
00:11:16,540 --> 00:11:22,230
So this that props that dispatch around this patch.

184
00:11:22,420 --> 00:11:29,600
And of course we can get the site data right open and close and then close it.

185
00:11:29,660 --> 00:11:31,560
For now we don't need to do anything else.

186
00:11:33,020 --> 00:11:34,520
Reload reloaded.

187
00:11:34,760 --> 00:11:35,250
All right.

188
00:11:35,390 --> 00:11:40,070
I'm going to go to home and I get to go to the store and reloaded again.

189
00:11:40,070 --> 00:11:40,780
All right.

190
00:11:40,940 --> 00:11:45,700
So we're going to go to the store and we get the site and we get the data so good.

191
00:11:45,750 --> 00:11:48,660
So now we need to pass to the footer all the props.

192
00:11:48,690 --> 00:11:54,950
So I'm going to say data equals this that props that site.

193
00:11:54,980 --> 00:11:59,270
All right now the footer and I'm going to go to the footer now.

194
00:11:59,790 --> 00:12:02,680
It's going to be receiving this is props of course.

195
00:12:02,730 --> 00:12:07,980
So we need to catch catch the props are going to say open and close and get the data prompts that we

196
00:12:07,980 --> 00:12:11,420
are passing and I'm going to go here and say OK.

197
00:12:11,460 --> 00:12:18,300
If inside data we have something that calls site data then of course we can render all the information

198
00:12:18,300 --> 00:12:19,140
of the footer.

199
00:12:19,220 --> 00:12:20,840
You know a good read there actually the footer.

200
00:12:21,020 --> 00:12:21,580
All right.

201
00:12:21,720 --> 00:12:29,190
Of course if nothing happens I'm going to go here and say that we want no we want to return no.

202
00:12:29,580 --> 00:12:31,320
Pretty basic stuff so far.

203
00:12:31,680 --> 00:12:42,670
So now up on the address instead of just saying Kramer we do data dot site data we access remember this

204
00:12:42,670 --> 00:12:45,150
is an array and we access the address

205
00:12:47,940 --> 00:12:51,750
and in theory we should be getting at least a dynamic address.

206
00:12:52,020 --> 00:12:52,850
So yeah.

207
00:12:52,860 --> 00:12:55,690
Kramer four five six seven eight whatever.

208
00:12:56,160 --> 00:12:56,770
OK.

209
00:12:57,210 --> 00:12:59,980
So same thing with the other ones going into the phone one.

210
00:13:00,210 --> 00:13:01,710
So opening close.

211
00:13:01,950 --> 00:13:10,590
And of course site are going to copy this one data and then phone the next one is going to be the business

212
00:13:10,590 --> 00:13:11,150
hours.

213
00:13:11,280 --> 00:13:13,590
So they copy paste.

214
00:13:13,670 --> 00:13:15,850
They call this ours now.

215
00:13:16,110 --> 00:13:20,170
Now and the next one it's the e-mail.

216
00:13:20,430 --> 00:13:21,250
All right.

217
00:13:21,690 --> 00:13:24,670
So e-mail.

218
00:13:24,720 --> 00:13:25,980
All right.

219
00:13:25,980 --> 00:13:30,560
So the application reloads and if we go to the footer all the data is right there.

220
00:13:30,560 --> 00:13:35,610
Now if I go to my account and go to site info I get 20.

221
00:13:35,700 --> 00:13:42,590
And right here 20 I going to modify it to update and the data comes comes back and gets updated.

222
00:13:42,600 --> 00:13:46,860
Forget it because we are of course rendering everything through prompts and we are updating the state

223
00:13:46,920 --> 00:13:49,580
of site data in site store.

224
00:13:49,980 --> 00:13:51,320
All right very good.

225
00:13:51,450 --> 00:13:54,180
So we are done with the whole project.

226
00:13:54,180 --> 00:13:55,100
We are not going to do.

227
00:13:55,110 --> 00:13:57,780
I'm not going to do anything else to this project.

228
00:13:57,780 --> 00:14:03,380
The only thing left to do is to of course make some changes to send this to production.

229
00:14:03,390 --> 00:14:09,090
And this time we're going to use Heroku because of course we get a testing your L and we get support

230
00:14:09,090 --> 00:14:11,190
from Mongo and everything else.

231
00:14:11,280 --> 00:14:14,060
So we're going to do that on the next few sections.

232
00:14:14,100 --> 00:14:19,170
And of course much much much later after the current course it's published and everything else are going

233
00:14:19,170 --> 00:14:23,520
to take maybe not much later after he finished uploading the course and it's public.

234
00:14:23,770 --> 00:14:28,510
I'm going to start recording the bonus sections and it's going to be quite good luck.

235
00:14:28,530 --> 00:14:34,170
We're going to do a few a few things on the bonus sections and of course you can watch it if you're

236
00:14:34,170 --> 00:14:36,830
only interested in what we're going to be doing.

237
00:14:36,840 --> 00:14:37,330
All right.

238
00:14:37,470 --> 00:14:40,640
So let's go to the next one which is going to be preparing for production.

