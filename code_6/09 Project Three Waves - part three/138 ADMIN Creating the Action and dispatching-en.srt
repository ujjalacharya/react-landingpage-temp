1
00:00:00,860 --> 00:00:05,220
All right so now we are going to be creating the actions and the reducers rhyme.

2
00:00:05,270 --> 00:00:05,730
OK.

3
00:00:05,870 --> 00:00:09,700
So are going to go to actions and this one is going to be a user action.

4
00:00:09,790 --> 00:00:12,740
I'm going to call the type.

5
00:00:12,740 --> 00:00:16,820
It's going to be on success.

6
00:00:16,820 --> 00:00:18,390
Bye bye.

7
00:00:18,440 --> 00:00:19,690
And then user.

8
00:00:19,700 --> 00:00:20,420
All right.

9
00:00:20,680 --> 00:00:21,510
So I'm going to copy.

10
00:00:21,530 --> 00:00:25,140
Of course we need to add this to types just the same as always.

11
00:00:25,400 --> 00:00:36,460
And I'm going to say export export then Konst unsuccess by user and same thing on success by user.

12
00:00:36,890 --> 00:00:37,900
All right.

13
00:00:38,270 --> 00:00:43,250
We're going to go back to user actions and you know create the request for this.

14
00:00:43,460 --> 00:00:53,520
So at the bottom we're going to export a function called whatever you want on success by whatever.

15
00:00:54,770 --> 00:00:57,850
So this one will be we will be getting some data back.

16
00:00:57,890 --> 00:00:59,650
We're going to talk about this in a minute.

17
00:00:59,720 --> 00:01:04,130
So after we get the data of course you're going to do the request and at the end you're going to return

18
00:01:04,130 --> 00:01:04,880
something.

19
00:01:04,880 --> 00:01:08,080
So what we return is that unsuccess by user.

20
00:01:08,240 --> 00:01:14,780
And then we return a payload pay load with whatever we get back from the request and begin to create.

21
00:01:14,780 --> 00:01:17,240
Right now we don't have the request going to add it.

22
00:01:17,240 --> 00:01:18,870
It's a very simple request.

23
00:01:18,890 --> 00:01:23,800
So going to a concert request equals and it's going to be a post.

24
00:01:23,840 --> 00:01:28,160
So CEOs then post opening close.

25
00:01:28,160 --> 00:01:32,970
Now the hell were we going to be sending this to the user or server.

26
00:01:32,990 --> 00:01:33,480
All right.

27
00:01:33,740 --> 00:01:39,850
So we can say use our server then forced laugh and the route its success by.

28
00:01:39,890 --> 00:01:40,550
All right.

29
00:01:40,820 --> 00:01:42,520
So we do success fine.

30
00:01:42,680 --> 00:01:43,120
Right.

31
00:01:43,190 --> 00:01:43,720
OK.

32
00:01:43,970 --> 00:01:48,200
Now we're going to be passing this data for now which is going to I'm going to pass it and then we're

33
00:01:48,200 --> 00:01:49,870
going to create this.

34
00:01:49,910 --> 00:01:54,020
The way then of course we're going to get a response.

35
00:01:54,020 --> 00:02:00,770
So then open and close we get a response and we put this.

36
00:02:00,800 --> 00:02:05,240
Of course we return something so return so we don't need to return.

37
00:02:05,240 --> 00:02:05,770
We can do.

38
00:02:05,800 --> 00:02:09,560
Response that data and that will be returned.

39
00:02:09,560 --> 00:02:10,240
All right.

40
00:02:10,480 --> 00:02:13,590
Burguet So let's get good.

41
00:02:13,640 --> 00:02:17,100
So now what do we need to do is to include this success by.

42
00:02:17,180 --> 00:02:22,870
But before I'm going to go to read reducers go to use the reducer.

43
00:02:22,970 --> 00:02:30,230
We need to copy the type added to the reducer and I'm going to do coma and on success by user Breguet

44
00:02:30,860 --> 00:02:36,230
now the douceur will be receiving several things from the payload.

45
00:02:36,530 --> 00:02:44,590
So first are going to created we have a case a case of unsuccess by user.

46
00:02:44,600 --> 00:02:44,950
Right.

47
00:02:44,990 --> 00:02:45,640
OK.

48
00:02:45,890 --> 00:02:49,380
Then we want to return an object with dot dot dot.

49
00:02:49,520 --> 00:02:52,060
And the state right the pre-state.

50
00:02:52,070 --> 00:02:59,930
Now we will get we will create a success by key with whatever we get back from the server.

51
00:02:59,990 --> 00:03:07,640
And remember the server returns and we find it at the end returns the success so we can store that here

52
00:03:07,910 --> 00:03:08,930
on success by.

53
00:03:09,050 --> 00:03:19,820
We say that the action that payload that success and success Burguet will make sure I use success IMMERGUT

54
00:03:20,870 --> 00:03:21,890
right.

55
00:03:22,050 --> 00:03:26,040
So what else what do we need to do after we have everything you know.

56
00:03:26,070 --> 00:03:27,010
Correct.

57
00:03:27,300 --> 00:03:33,600
So we need to go to the user data try here just the user data and we need to update the card because

58
00:03:33,630 --> 00:03:35,500
now it's going to be empty.

59
00:03:35,520 --> 00:03:38,020
So I'm going to go to user data.

60
00:03:38,210 --> 00:03:44,640
I'm going to open it close and I going to say that we're going to put in a graph and stay put here whatever

61
00:03:44,640 --> 00:03:45,970
we have inside user data.

62
00:03:45,980 --> 00:03:51,090
But the card is going to be updated with whatever we get back from the server.

63
00:03:51,090 --> 00:03:53,850
So payload in that cart.

64
00:03:54,150 --> 00:03:54,690
Right.

65
00:03:54,720 --> 00:03:57,690
And remember we are passing a cart with nothing.

66
00:03:57,690 --> 00:03:59,590
Of course this is going to be an empty array.

67
00:03:59,610 --> 00:03:59,920
All right.

68
00:03:59,940 --> 00:04:00,870
But that's OK.

69
00:04:01,290 --> 00:04:02,030
They're going to do.

70
00:04:02,040 --> 00:04:08,160
I'm going to go right here at the bottom and remember that we also have a card DTL property right right

71
00:04:08,160 --> 00:04:08,800
here.

72
00:04:09,000 --> 00:04:15,150
So we need to comment and say that now the car detail it's equal to whatever we get from the action

73
00:04:15,360 --> 00:04:21,540
that payload that cart detail and the car detail is just an empty array.

74
00:04:21,540 --> 00:04:25,700
So it is going to set the car detail back to default.

75
00:04:25,700 --> 00:04:26,150
All right.

76
00:04:26,190 --> 00:04:28,050
Now pretty simple.

77
00:04:28,140 --> 00:04:32,600
Now of course one dispatched reaction so we have the action and everything else.

78
00:04:32,610 --> 00:04:34,360
We called it unsuccess by.

79
00:04:34,450 --> 00:04:39,360
So going to go to cart and included here at the top.

80
00:04:39,360 --> 00:04:40,620
All right.

81
00:04:40,620 --> 00:04:43,480
So of course then we need to dispatch action.

82
00:04:43,560 --> 00:04:45,070
So whenever the transaction.

83
00:04:45,090 --> 00:04:48,160
It's success we're going to go here.

84
00:04:48,240 --> 00:04:48,750
All right.

85
00:04:48,810 --> 00:04:54,870
So what we need to do when you dispatch it with this that props that dispatch open opening close and

86
00:04:54,870 --> 00:04:56,520
we put success by.

87
00:04:56,760 --> 00:05:02,730
So what are we going to be passing to you know the success by right here we say that we are passing

88
00:05:02,730 --> 00:05:03,380
data.

89
00:05:03,540 --> 00:05:05,930
But what do we get inside that data.

90
00:05:06,000 --> 00:05:10,540
Well we need to pass two things to X-server expects two things.

91
00:05:10,790 --> 00:05:13,960
It's going to be a we're waiting for the cart detail.

92
00:05:13,950 --> 00:05:15,610
That's one thing we need to pass.

93
00:05:15,730 --> 00:05:21,890
And the payment data from from Pay-Pal right now.

94
00:05:22,110 --> 00:05:24,640
So we're going to be passing the card detail and the.

95
00:05:24,690 --> 00:05:25,580
And everything else.

96
00:05:25,590 --> 00:05:31,000
But we are pals we are going to be passing just one single no value.

97
00:05:31,170 --> 00:05:34,450
So we're going to be passing an object opening close.

98
00:05:34,680 --> 00:05:43,950
So we have the cart detail which is inside is probs the user that card detail at this point of course

99
00:05:44,310 --> 00:05:46,610
that coma and we need the payment data.

100
00:05:46,740 --> 00:05:53,830
So just to avoid any mistakes I'm going to copy the payment key payment data and this one it's equal

101
00:05:53,850 --> 00:05:57,720
to whatever data we get back from the Pay-Pal connector.

102
00:05:58,050 --> 00:06:01,980
And of course then we run something.

103
00:06:02,400 --> 00:06:04,810
So what are we going to do if everything goes OK.

104
00:06:04,900 --> 00:06:06,630
Well we're going to do the said State.

105
00:06:06,720 --> 00:06:10,420
Now I need to make sure that everything is you know correct.

106
00:06:10,440 --> 00:06:18,490
So if this that prompts that user that success by Remember that we get a success by.

107
00:06:18,870 --> 00:06:19,990
Right.

108
00:06:20,230 --> 00:06:22,940
Let me go here.

109
00:06:22,970 --> 00:06:23,550
Paste this.

110
00:06:23,550 --> 00:06:27,510
First we get a success by on the use of reducer.

111
00:06:27,680 --> 00:06:30,280
We get to access my if we get this equal to true.

112
00:06:30,300 --> 00:06:32,210
It means that everything went OK.

113
00:06:32,370 --> 00:06:38,600
So if we do have this inside user and success vi then begin to reset the component.

114
00:06:38,610 --> 00:06:43,530
Back to you know to show the success message and clear everything else.

115
00:06:45,570 --> 00:06:46,540
So looks good.

116
00:06:46,620 --> 00:06:51,140
Hopefully again there are no mistakes but okay.

117
00:06:51,180 --> 00:06:52,360
It was a lot of code.

118
00:06:52,380 --> 00:06:55,770
So I'm kind of expecting a mistake.

119
00:06:56,070 --> 00:06:57,470
So right.

120
00:06:57,480 --> 00:07:01,920
So let's do the let's do the circuit let's try to buy something.

121
00:07:02,120 --> 00:07:04,520
We're going to reload the application.

122
00:07:04,650 --> 00:07:06,280
I have one right here I'm going to remove it.

123
00:07:06,300 --> 00:07:07,520
Going to go to guitars.

124
00:07:07,860 --> 00:07:11,380
Again an to add maybe a different one.

125
00:07:11,430 --> 00:07:12,880
They're all very expensive.

126
00:07:12,970 --> 00:07:13,560
Well.

127
00:07:13,750 --> 00:07:15,280
Well the rocket one.

128
00:07:15,360 --> 00:07:16,510
Yeah whatever.

129
00:07:16,530 --> 00:07:21,780
And I'm going to add the wrote casters so you'll have two products.

130
00:07:21,780 --> 00:07:26,700
So the amount it's one on one I'm going to go to people of course are going to pass so you can see this

131
00:07:29,480 --> 00:07:30,740
are going to log in.

132
00:07:31,080 --> 00:07:34,660
So it is a testing.

133
00:07:35,100 --> 00:07:41,110
You three say log in log in.

134
00:07:41,120 --> 00:07:43,970
All right so I'm going to complete the purchase pay now

135
00:07:46,940 --> 00:07:48,210
and there is some mistake of course.

136
00:07:48,290 --> 00:07:51,440
All right let's see if we get something on the server.

137
00:07:52,040 --> 00:07:52,640
Nothing.

138
00:07:52,640 --> 00:07:54,730
Let me see if I can get something right here.

139
00:07:57,210 --> 00:07:58,310
Would be open.

140
00:07:58,400 --> 00:08:01,310
Let's see Hermanus.

141
00:08:01,350 --> 00:08:02,820
No that is OK.

142
00:08:04,020 --> 00:08:09,490
OK so let me try to find a mistake and I will tell you what my error was OK.

143
00:08:09,510 --> 00:08:12,680
I did find the mistake but I want to show you something else first.

144
00:08:12,990 --> 00:08:16,920
If I go to the database to rubble 3D everything went OK.

145
00:08:17,070 --> 00:08:18,310
At least with the server.

146
00:08:18,400 --> 00:08:22,120
But it's not updating it's day component but everything else it's fine.

147
00:08:22,290 --> 00:08:25,550
So if you go to waves and go to payments.

148
00:08:25,830 --> 00:08:32,430
So now we have one record and we have the user with the user information.

149
00:08:32,430 --> 00:08:39,240
We have the data you know with the Paypal information and then we get the product.

150
00:08:39,240 --> 00:08:43,940
So if we go to hear date of purchase and everything else everything it's ok.

151
00:08:43,950 --> 00:08:45,670
At least with the payments.

152
00:08:45,750 --> 00:08:46,890
So let's check the user.

153
00:08:46,890 --> 00:08:53,640
If I go to user the card it's zero so it's zero elements and the history it's OK.

154
00:08:53,640 --> 00:08:58,180
Now we have the two elements we just purchased with the pay and everything else.

155
00:08:58,200 --> 00:09:02,080
So the problem must be on the update of products.

156
00:09:02,100 --> 00:09:05,430
We're going to check that right now or the actual components right here.

157
00:09:05,430 --> 00:09:09,490
Notice that everything you know re-offender and now I'm getting this.

158
00:09:09,570 --> 00:09:10,460
But that is OK.

159
00:09:10,680 --> 00:09:12,510
So let me just keep checking.

160
00:09:12,510 --> 00:09:13,430
What is the error.

161
00:09:13,500 --> 00:09:16,770
The next thing going to check is the products that we update it.

162
00:09:16,770 --> 00:09:23,630
You know we are updating the value of the salt that might be the mistake and I'll be right back.

163
00:09:24,030 --> 00:09:24,450
All right.

164
00:09:24,450 --> 00:09:26,950
I know what the problem is versus a mistake.

165
00:09:27,180 --> 00:09:29,010
So right here.

166
00:09:29,550 --> 00:09:32,000
I've deleted of course right now to try again.

167
00:09:32,160 --> 00:09:38,070
The history is that they did everything the payments just deleted everything back to zero so we can

168
00:09:38,440 --> 00:09:39,960
start again and try again.

169
00:09:40,000 --> 00:09:44,610
I did a few cons. locks you know very common way of testing.

170
00:09:44,610 --> 00:09:47,340
The problem is it's not each of serious.

171
00:09:47,340 --> 00:09:49,750
Of course it's serious.

172
00:09:49,950 --> 00:09:52,160
That is this is why everything was working.

173
00:09:52,200 --> 00:09:56,770
But when we enter here we are not reaching this because of course this will not work.

174
00:09:56,880 --> 00:10:01,060
It's each serious story for that or so.

175
00:10:01,070 --> 00:10:03,960
Well you know a lot of code could happen.

176
00:10:04,090 --> 00:10:07,970
OK so I'm going to reload the application I'm going to go to be Tarz.

177
00:10:08,240 --> 00:10:12,880
I'm going to go to Roadmaster again back to my cart.

178
00:10:13,360 --> 00:10:15,310
Pay-Pal check out.

179
00:10:15,770 --> 00:10:16,580
Try again.

180
00:10:19,220 --> 00:10:26,260
I'm going to pay now pay now and there we go we get thank you.

181
00:10:26,290 --> 00:10:27,970
Or there is now complete.

182
00:10:28,260 --> 00:10:36,120
And of course if you go to Mungo or rowboat sweetie and go to payments we have a new payment with all

183
00:10:36,120 --> 00:10:39,450
the data user data and product.

184
00:10:39,450 --> 00:10:46,200
If we go to users we're going to get the cart with zero net with nothing.

185
00:10:46,360 --> 00:10:48,690
And then the history with these fields.

186
00:10:48,880 --> 00:10:52,730
And if we try to find the road caster let me try to find it first.

187
00:10:55,100 --> 00:10:55,930
We get 16.

188
00:10:55,940 --> 00:11:00,720
Well maybe of course I will need to try again just to make sure of this but I'm pretty sure it's working.

189
00:11:00,770 --> 00:11:04,240
Maybe you had 15 from you know from the previous state.

190
00:11:04,400 --> 00:11:06,500
So this one should be go to 17.

191
00:11:06,580 --> 00:11:12,680
Going to do the same thing again to go to guitarists at the broadcaster go to my cart do the Paypal

192
00:11:12,680 --> 00:11:19,170
check out I can pay and remember that we have 16.

193
00:11:19,580 --> 00:11:23,840
So I'm going to pay all of this is correct.

194
00:11:23,840 --> 00:11:30,670
So now if I reopen it's the entry number 10 if I reopen and go to 10 we get 17.

195
00:11:30,680 --> 00:11:31,310
So OK.

196
00:11:31,350 --> 00:11:33,920
So everything works sorry for the solemn stake.

197
00:11:34,160 --> 00:11:35,780
But you know that could happen.

198
00:11:36,260 --> 00:11:36,950
Right.

199
00:11:37,340 --> 00:11:37,730
OK.

200
00:11:37,790 --> 00:11:39,160
So everything is good.

201
00:11:39,260 --> 00:11:41,530
Now what are we going to be doing next.

202
00:11:41,630 --> 00:11:46,910
We're going to be going to my account and we go when we go to my account and of course if I go to my

203
00:11:46,910 --> 00:11:49,140
card we have new items we clear that.

204
00:11:49,310 --> 00:11:54,350
So there's no need to trigger a dispatch with a clear success or anything because the success we get

205
00:11:54,350 --> 00:12:00,140
right here on the card the success by it's only after we do a transaction.

206
00:12:00,140 --> 00:12:01,850
So there's no need to do that.

207
00:12:02,030 --> 00:12:05,780
So if we go to my account we get the history of purchases.

208
00:12:05,810 --> 00:12:12,230
So if I go to my user which is the Francis one we we have now a history.

209
00:12:12,350 --> 00:12:16,440
So we need to capture history and display all the elements right there.

210
00:12:16,520 --> 00:12:17,260
Right.

211
00:12:17,300 --> 00:12:19,020
Very very simple stuff.

212
00:12:19,160 --> 00:12:24,500
So what we need to do next of course is going to be this end user information will create an endpoint

213
00:12:24,500 --> 00:12:29,230
where we can modify some of the information of the user like the name of the passport.

214
00:12:29,240 --> 00:12:31,140
Again very very simple.

215
00:12:31,190 --> 00:12:37,190
And then we can manage this site info which is going to be adding an endpoint to handle the address

216
00:12:37,190 --> 00:12:38,820
the phone and everything else.

