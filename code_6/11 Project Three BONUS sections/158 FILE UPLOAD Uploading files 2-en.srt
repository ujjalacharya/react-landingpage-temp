1
00:00:00,880 --> 00:00:01,150
All right.

2
00:00:01,150 --> 00:00:02,140
So let's keep it going.

3
00:00:02,260 --> 00:00:06,740
We need to create the route this and I mean I'm a cigarette here with this method.

4
00:00:06,760 --> 00:00:12,600
We cannot you know create the directory so we can and need to do this manually.

5
00:00:12,620 --> 00:00:19,090
I'm going to go to new folder not insites ever made a mistake and go outside the server and create a

6
00:00:19,090 --> 00:00:21,500
new directory called uploads.

7
00:00:21,910 --> 00:00:27,660
And of course if we are not creating this nothing is going to happen so are going to go back to ad file

8
00:00:27,820 --> 00:00:29,790
and we need to create the request.

9
00:00:29,830 --> 00:00:33,490
Very very simple ASIO's then post.

10
00:00:33,670 --> 00:00:35,290
We pass the name.

11
00:00:35,360 --> 00:00:40,000
You know the route copy the name of the route going to paste it right here.

12
00:00:40,010 --> 00:00:46,860
And of course then we need to pass the form data that coma and we passed that config right.

13
00:00:46,990 --> 00:00:52,840
Then of course we get a response back so response response.

14
00:00:53,290 --> 00:00:55,730
And then you know we need to do a few things.

15
00:00:55,810 --> 00:01:00,550
Now the server up after we upload the image is going to send success.

16
00:01:00,550 --> 00:01:02,310
True or false.

17
00:01:02,320 --> 00:01:12,760
So inside of they're of here going to say OK if we get a response that data DOD success then of course

18
00:01:12,820 --> 00:01:14,180
we're going to set some state.

19
00:01:14,230 --> 00:01:17,420
So there's that set stayed open and close.

20
00:01:17,740 --> 00:01:18,940
And what we're going to do.

21
00:01:18,940 --> 00:01:23,100
I'm going to grab the form success change it to the form error.

22
00:01:23,260 --> 00:01:24,270
Leave it to false.

23
00:01:24,310 --> 00:01:26,030
And the upload back to false.

24
00:01:26,050 --> 00:01:29,730
Remember that whenever we start this episode we are sending it to true.

25
00:01:29,740 --> 00:01:30,550
All right.

26
00:01:30,670 --> 00:01:31,990
So the former success.

27
00:01:31,990 --> 00:01:35,310
It's true and everything else is just back to false.

28
00:01:35,320 --> 00:01:39,210
Now we want to do I want to delete the form success after two seconds.

29
00:01:39,310 --> 00:01:43,580
So we just ran a callback and we do set timeout.

30
00:01:43,600 --> 00:01:50,020
I'm not teaching anything you right now we can know this is old code.

31
00:01:50,110 --> 00:01:57,300
So there's that said state opening close and we changed it form success back to true.

32
00:01:58,030 --> 00:02:02,180
And we can do it after two seconds.

33
00:02:02,440 --> 00:02:02,900
Right.

34
00:02:05,150 --> 00:02:05,660
OK.

35
00:02:05,950 --> 00:02:08,640
Virga So this looks nice.

36
00:02:08,640 --> 00:02:09,750
Let's give it a try.

37
00:02:09,830 --> 00:02:13,170
I'm going to go here again at blowed something.

38
00:02:13,350 --> 00:02:14,250
I'm going to open.

39
00:02:14,310 --> 00:02:17,300
And then we get the success on the server.

40
00:02:17,340 --> 00:02:21,780
And if we go here and we go to uploads we get the upload image.

41
00:02:21,780 --> 00:02:22,440
Very good man.

42
00:02:22,470 --> 00:02:26,580
So you know it works it's really really easy to use release to use.

43
00:02:26,640 --> 00:02:33,020
Of course you can go to the documentation and check this a little bit you know further.

44
00:02:33,110 --> 00:02:38,400
Now before we move on to the next thing of course if you once again check the documentation I'm going

45
00:02:38,400 --> 00:02:44,520
to give you a scenario what happens if we want to you know FELTER what we are uploading and what is

46
00:02:44,520 --> 00:02:44,760
this.

47
00:02:44,760 --> 00:02:45,850
No.

48
00:02:46,100 --> 00:02:46,430
OK.

49
00:02:46,470 --> 00:02:48,000
So I'm going to do coma.

50
00:02:48,000 --> 00:02:53,400
I'm going to I'm going to put some code here I have it ready right here I'm going to put it and then

51
00:02:53,400 --> 00:02:56,880
I can explain you we are not going to do this.

52
00:02:56,880 --> 00:02:59,160
I'm just putting the code so I can explain you.

53
00:02:59,250 --> 00:03:02,150
So you have another property called File Filcher.

54
00:03:02,190 --> 00:03:08,490
So with a file filter you can inspect some of the properties that the file has and then you can decide

55
00:03:08,700 --> 00:03:12,040
if you want to lead the file move forward.

56
00:03:12,050 --> 00:03:16,710
You upload the file inside the uploads to stored there or not.

57
00:03:16,710 --> 00:03:22,480
So for example right here I'm entering the path and this is actually something from.

58
00:03:22,560 --> 00:03:23,970
From no jazz.

59
00:03:23,980 --> 00:03:28,410
We need to require path we're going to do it in a couple of minutes for something else.

60
00:03:28,500 --> 00:03:34,140
Then we enter the extension name and we check the extension then the original file name.

61
00:03:34,170 --> 00:03:34,540
Yes.

62
00:03:34,560 --> 00:03:37,240
Remember we have access to file and then we just check.

63
00:03:37,240 --> 00:03:40,110
Is this AJP G or PNB.

64
00:03:40,110 --> 00:03:44,710
So if it's not again we are not going to let the user move forward.

65
00:03:44,850 --> 00:03:48,290
So what do we do we return that same callback.

66
00:03:48,480 --> 00:03:52,100
But now instead of No this is going to be the response.

67
00:03:52,110 --> 00:03:54,630
And this is actually the response we sent back.

68
00:03:54,630 --> 00:03:57,840
Before we go to this instance.

69
00:03:57,840 --> 00:03:58,710
Right.

70
00:03:58,710 --> 00:04:02,010
So we did this we say OK you are not allowed to go in.

71
00:04:02,010 --> 00:04:05,030
So the first callback is going to be that rejection.

72
00:04:05,130 --> 00:04:07,300
And of course the second one is false.

73
00:04:07,440 --> 00:04:14,580
Now if Gore this of course passes this then we're going to go to the you know our regular Colback saying

74
00:04:14,580 --> 00:04:16,500
no forever and then true.

75
00:04:16,590 --> 00:04:19,950
And in this case if we get true it means move forward.

76
00:04:19,980 --> 00:04:23,600
The next thing which in this case is doing the upload.

77
00:04:23,670 --> 00:04:26,510
So this is one way you know this is what they what the know.

78
00:04:26,520 --> 00:04:31,700
The first argument means and how can we filter you know the files.

79
00:04:32,070 --> 00:04:33,320
I'm not going to use it right here.

80
00:04:33,330 --> 00:04:41,160
Not that important to you know deleted or maybe media just going to leave and come this out because

81
00:04:41,160 --> 00:04:43,430
of course this file is going to go to you.

82
00:04:43,890 --> 00:04:50,600
So now what we can do we can upload the things right here and it's not doing that some time out time

83
00:04:50,610 --> 00:04:54,340
out this state for success back to false.

84
00:04:54,420 --> 00:04:55,470
All right.

85
00:04:55,470 --> 00:05:02,460
So after we upload a file what I would like to do I would like to go.

86
00:05:02,610 --> 00:05:03,070
I'm sorry.

87
00:05:03,120 --> 00:05:11,850
After upload a file no after I load this screen the file I would like to get like to get a list of all

88
00:05:11,850 --> 00:05:15,830
the files inside the uploads directory right.

89
00:05:15,990 --> 00:05:21,100
I want to go to this location get all the names of files and put them right here.

90
00:05:21,330 --> 00:05:27,960
And later what I want to do I went to click maybe one file open in new window and download the file

91
00:05:28,100 --> 00:05:32,010
and all of this of course is going to happen on the admin side of things.

92
00:05:32,430 --> 00:05:36,190
So let's do that right now just trying to fetch all the list of files.

93
00:05:36,980 --> 00:05:42,800
Right to fetch the list of files that we're going to need a new route that can handle this kind of request

94
00:05:42,800 --> 00:05:45,990
is going to be a get out and it will answer to the uploads.

95
00:05:46,010 --> 00:05:48,660
And we turn all the results inside of here.

96
00:05:48,830 --> 00:05:52,740
So for this we need to require a few things from note.

97
00:05:52,910 --> 00:06:01,630
So we need to bring the file reader so require at fast so we can read what's inside the directory.

98
00:06:01,640 --> 00:06:05,670
Right then we need the path because we need the location of that.

99
00:06:05,690 --> 00:06:13,420
So we do require open and close and we require PAF and node modules.

100
00:06:13,970 --> 00:06:15,900
They come with no jast.

101
00:06:15,920 --> 00:06:17,950
That's why we are not installing them.

102
00:06:18,230 --> 00:06:18,680
All right.

103
00:06:18,770 --> 00:06:28,940
Then we need to create a route app that get and it's for Slash API users for Slash and admin files.

104
00:06:28,980 --> 00:06:30,550
All right then coma.

105
00:06:30,650 --> 00:06:35,630
And of course this happens only if the user is authenticated and it's an administrator.

106
00:06:35,750 --> 00:06:38,620
And then of course we run our callback.

107
00:06:39,000 --> 00:06:42,810
So I get so request and response.

108
00:06:43,310 --> 00:06:45,000
So what do we need to do now.

109
00:06:45,140 --> 00:06:47,980
We need to go to the directory to this directory.

110
00:06:48,230 --> 00:06:51,580
And you know kind of get the location of that directory.

111
00:06:51,770 --> 00:06:57,500
So I'm going to say Konst and then they're equals and we're going to use that path and we're going to

112
00:06:57,500 --> 00:06:59,160
use resolve.

113
00:06:59,300 --> 00:07:04,680
So whenever we do we just go you know to the main directory to the main route.

114
00:07:04,790 --> 00:07:06,230
So we use dot.

115
00:07:06,410 --> 00:07:10,910
And then I'm going to do plus and I'm going to be adding the uploads.

116
00:07:11,300 --> 00:07:14,570
You get several ways of handling this.

117
00:07:14,720 --> 00:07:17,020
Inside No just this is one way.

118
00:07:17,300 --> 00:07:25,040
So we just pretty much we are creating a viral host hosts the location of that uploads.

119
00:07:25,040 --> 00:07:32,060
And then what we do we use the FS and if FS will enter to that directory and read the files inside the

120
00:07:32,060 --> 00:07:37,610
directory and we use it read Durr that FS will provide us.

121
00:07:37,640 --> 00:07:43,010
So the first one the first argument of this reader is going to be the directory We want to read and

122
00:07:43,010 --> 00:07:45,620
then you know the Colback.

123
00:07:45,650 --> 00:07:46,670
So all right.

124
00:07:47,390 --> 00:07:52,500
So the Colback contains an error if we are not doing anything we get an error.

125
00:07:52,670 --> 00:07:57,090
And the second one is going to be the items inside the directory.

126
00:07:57,290 --> 00:08:00,050
So what we want to do we just want to return the items.

127
00:08:00,050 --> 00:08:12,350
So I'm going to say return response status off to 100 and I'm going to send the items just like that.

128
00:08:12,350 --> 00:08:14,180
No really simple.

129
00:08:14,750 --> 00:08:19,010
So whenever we make a request to this location we will get a response.

130
00:08:19,020 --> 00:08:23,020
We have an array of all the items inside uploads.

131
00:08:23,120 --> 00:08:30,920
I'm going to do one more upload so we can get you know maybe at least two files maybe three files and

132
00:08:30,920 --> 00:08:32,620
two seconds goes away.

133
00:08:33,440 --> 00:08:36,700
And then this.

134
00:08:36,820 --> 00:08:37,120
All right.

135
00:08:37,150 --> 00:08:38,820
So now we have three outlets.

136
00:08:38,830 --> 00:08:39,540
Very good.

137
00:08:39,820 --> 00:08:46,240
So let's go to the you know the front end and make a request OK.

138
00:08:46,240 --> 00:08:52,230
So on the front and we will fetch the files and we will store the files inside the files state.

139
00:08:52,330 --> 00:08:52,710
Right.

140
00:08:52,810 --> 00:08:53,450
OK.

141
00:08:53,770 --> 00:08:55,080
When do we want to do this.

142
00:08:55,150 --> 00:08:57,130
As soon as the component will mount.

143
00:08:57,280 --> 00:08:59,590
So that component will mount.

144
00:08:59,700 --> 00:09:01,070
Sorry comput dismount.

145
00:09:01,270 --> 00:09:09,670
Open and close and then we say X-ers dot get we passed the route and then we catch the response from

146
00:09:09,670 --> 00:09:09,970
here.

147
00:09:09,970 --> 00:09:14,440
So dot then and we do response.

148
00:09:14,470 --> 00:09:21,460
We've run the callback and on the callback we want to do this that said state opening close and I'm

149
00:09:21,460 --> 00:09:27,570
going to say that files equals to whatever we get back from the response that data noted.

150
00:09:27,580 --> 00:09:33,910
Notice that not doing redux right here and I'm doing this just to save time because you've already know

151
00:09:33,970 --> 00:09:36,370
how to use redux at this point.

152
00:09:36,370 --> 00:09:41,530
So you know I just want to save some time from your time of course.

153
00:09:41,530 --> 00:09:42,240
All right.

154
00:09:42,640 --> 00:09:51,070
So before I do this I want to get the council Council lock and then responds that data.

155
00:09:51,070 --> 00:09:54,760
And you know just check that we're getting something at least.

156
00:09:54,760 --> 00:09:57,000
So inspect and let's see the con..

157
00:09:57,010 --> 00:09:58,930
Hopefully we get something.

158
00:09:59,250 --> 00:09:59,570
OK.

159
00:09:59,620 --> 00:10:03,100
You know we get an rate with three different files.

160
00:10:03,380 --> 00:10:03,880
Right.

161
00:10:03,880 --> 00:10:04,970
We'll it is simple.

162
00:10:05,080 --> 00:10:10,740
So now on this component we kind of have to have a state with an array of files.

163
00:10:10,840 --> 00:10:14,320
So the only thing we need to do is just you know show the files.

164
00:10:14,530 --> 00:10:17,310
So I'm going to go right here to bloats.

165
00:10:17,520 --> 00:10:21,780
I can create a order list and then do.

166
00:10:21,800 --> 00:10:29,170
Does that show file list opening close.

167
00:10:29,200 --> 00:10:30,070
All right.

168
00:10:30,070 --> 00:10:31,520
So this is going to be a function.

169
00:10:31,570 --> 00:10:32,640
We don't have this function.

170
00:10:32,650 --> 00:10:33,740
We need to create it.

171
00:10:33,760 --> 00:10:39,550
So we're going to go at the top and say okay show file list open and close.

172
00:10:39,550 --> 00:10:40,410
All right.

173
00:10:40,660 --> 00:10:43,990
So this one is going to be returning some GSX.

174
00:10:44,110 --> 00:10:47,640
And what we need to do first we need to check that we do have files.

175
00:10:47,800 --> 00:10:49,680
So there's that state that files.

176
00:10:49,900 --> 00:10:57,160
And if we don't have anything we don't do anything if we do have something this state that files then

177
00:10:57,160 --> 00:11:05,230
we do a map open and close up map and at each iteration I want to get the item and the it again the

178
00:11:05,230 --> 00:11:09,510
data transfer item What is that item coma.

179
00:11:09,540 --> 00:11:11,990
Well the iteration right.

180
00:11:12,150 --> 00:11:14,900
To deleted Oh forget.

181
00:11:14,950 --> 00:11:20,320
And then of course we run something and we return some GSX right.

182
00:11:20,440 --> 00:11:21,170
All right.

183
00:11:21,670 --> 00:11:29,500
So what I want to do since we have an order list and when to return return a list item right now.

184
00:11:29,710 --> 00:11:38,530
Later much later we are going to click on that list item and whenever we click it we can go to a link

185
00:11:38,560 --> 00:11:45,550
to a new location and in that location it's pretty much a new route and that route will be listening

186
00:11:45,760 --> 00:11:47,300
for the name of the file.

187
00:11:47,500 --> 00:11:51,340
So whenever we catch name of the file on that route we're going to do that later.

188
00:11:51,400 --> 00:11:53,580
We're going to download the file.

189
00:11:53,770 --> 00:11:55,230
So we're going to leave this right.

190
00:11:55,340 --> 00:12:04,420
I'm going to do I then key and the key is going to be equal to you know the iteration.

191
00:12:04,450 --> 00:12:06,830
So he or I.

192
00:12:07,140 --> 00:12:09,750
And then of course we pass the link.

193
00:12:10,330 --> 00:12:10,840
Right.

194
00:12:11,050 --> 00:12:12,610
So false.

195
00:12:12,670 --> 00:12:19,680
And then like so of course with the link we need a name so the name itself is the actual item.

196
00:12:19,720 --> 00:12:20,980
We get right here.

197
00:12:21,180 --> 00:12:22,830
And on the link we need to pass it to.

198
00:12:22,870 --> 00:12:27,030
So to open it close and the location and they're going to do it right now.

199
00:12:27,050 --> 00:12:32,960
AP I don't use Sir's for Flash download for Flash.

200
00:12:33,100 --> 00:12:36,640
And then we pass the name of the item the name of the image.

201
00:12:36,790 --> 00:12:42,270
And I want to do it when it create this as a target black.

202
00:12:42,540 --> 00:12:46,710
Nothing you it just right here is just a blank blank.

203
00:12:46,990 --> 00:12:47,860
Right.

204
00:12:48,340 --> 00:12:48,770
OK.

205
00:12:48,910 --> 00:12:50,500
So why save it.

206
00:12:52,980 --> 00:12:53,270
OK.

207
00:12:53,300 --> 00:12:54,740
Now we are getting the images.

208
00:12:54,760 --> 00:12:59,640
Of course if I click it we go to a target blank but we don't have that route right.

209
00:12:59,670 --> 00:13:00,000
OK.

210
00:13:00,010 --> 00:13:03,220
We're going to need to kind of create or do something with that.

211
00:13:03,690 --> 00:13:03,920
All right.

212
00:13:03,940 --> 00:13:07,780
API is downlow API user download.

213
00:13:07,840 --> 00:13:09,210
All right everything is cool.

214
00:13:09,610 --> 00:13:14,530
So now what do we need to do we need to create a route that is going to be listening for this and whenever

215
00:13:14,650 --> 00:13:17,680
listens is going to grab the name of the file.

216
00:13:17,770 --> 00:13:18,450
Right.

217
00:13:18,520 --> 00:13:21,000
It's going to search it and give you the download.

218
00:13:21,010 --> 00:13:24,790
Let's do that on the next lecture because again this one went to larm.

